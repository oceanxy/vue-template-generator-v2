/*! For license information please see 382.af131f7d.js.LICENSE.txt */
"use strict";(self.webpackChunkvue_template_generator_v2=self.webpackChunkvue_template_generator_v2||[]).push([[382],{13574:function(e,t,n){n.d(t,{A:function(){return X},O:function(){return H}});n(52675),n(89463),n(2259),n(45700),n(28706),n(2008),n(23792),n(89572),n(2892),n(83851),n(81278),n(79432),n(26099),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953);var r=n(20641),o=n(50953),i=n(80708),l=n(74232),a=n(63225),u=n(22398),c=n(65633),s=n(21228),p=n(98202),d=n(97339),f=n(52048),g=(n(48980),n(23418),n(48598),n(62062),n(34782),n(26910),n(54554),n(62010),n(9868),n(27495),n(90906),n(38781),n(71761),n(42762),n(81454),n(40875),n(10287),n(3362),n(54720)),v=n(64663),y=n(40983),b=n(44983),m=n(2543);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function A(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof a?r:a,c=Object.create(u.prototype);return w(c,"_invoke",function(n,r,o){var i,a,u,c=0,s=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,u=e,d.n=n,l}};function f(n,r){for(a=n,u=r,t=0;!p&&c&&!o&&t<s.length;t++){var o,i=s[t],f=d.p,g=i[2];n>3?(o=g===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,d.v=r,d.n=i[1]):f<g&&(o=n<3||i[0]>r||r>g)&&(i[4]=n,i[5]=r,d.n=g,a=0))}if(o||n>1)return l;throw p=!0,r}return function(o,s,g){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&f(s,g),a=s,u=g;(t=a<2?e:u)||!p;){i||(a?a<3?(a>1&&(d.n=-1),f(a,u)):d.n=u:d.v=u);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(p=d.n<0)?u:n.call(r,d))!==l)break}catch(t){i=e,a=1,u=t}finally{c=1}}return{value:t,done:p}}}(n,o,i),!0),c}var l={};function a(){}function u(){}function c(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(w(t={},r,function(){return this}),t),p=c.prototype=a.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,w(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=c,w(p,"constructor",c),w(c,"constructor",u),u.displayName="GeneratorFunction",w(c,o,"GeneratorFunction"),w(p),w(p,o,"Generator"),w(p,r,function(){return this}),w(p,"toString",function(){return"[object Generator]"}),(A=function(){return{w:i,m:d}})()}function w(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}w=function(e,t,n,r){function i(t,n){w(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},w(e,t,n,r)}function F(e,t,n,r,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}var E={name:"TGColorPicker",emits:["change","update:value","update:open"],props:{open:{type:Boolean,default:!1},value:{type:String,default:"#ffffff"},defaultValue:{type:String,default:""},placeholder:{type:String,default:"请输入颜色值"}},setup:function(e,t){t.attrs;var n=t.emit,l=(0,o.KR)(e.value),a=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(e.open),s=null;(0,r.sV)(function(){var e;(e=document.createElement("div")).style.position="absolute",e.style.left="-9999px",e.style.visibility="hidden",document.body.appendChild(e),s={isValid:function(t){return!t||(e.style.backgroundColor="",e.style.backgroundColor=t,""!==e.style.backgroundColor)},destroy:function(){document.body.removeChild(e)}},u.value=!!window.EyeDropper}),(0,r.hi)(function(){var e;null===(e=s)||void 0===e||e.destroy()}),(0,r.wB)(function(){return e.value},function(e){return l.value=e}),(0,r.wB)(function(){return e.open},function(e){c.value=e},{immediate:!0});var p=function(){var e,t=(e=A().m(function e(){var t,n,r;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=new window.EyeDropper,e.n=1,t.open();case 1:n=e.v,r=n.sRGBHex,d(r),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){F(i,r,o,l,a,"next",e)}function a(e){F(i,r,o,l,a,"throw",e)}l(void 0)})});return function(){return t.apply(this,arguments)}}(),d=(0,m.debounce)(function(e){var t,r,o,i=o=(o="object"===h(e)?1===e.a?e.hex:e.hex8:e).trim();/^[0-9a-f]{3,8}$/i.test(o)&&(i="#".concat(o.toLowerCase())),null!==(t=s)&&void 0!==t&&t.isValid(i)?(a.value=!0,l.value=i,n("update:value",i),n("change",i)):null!==(r=s)&&void 0!==r&&r.isValid(o)&&(a.value=!0,l.value=o,n("update:value",o),n("change",o))},200);return function(){return(0,r.bF)(v.A,{class:"tg-color-picker-preview"},{default:function(){return[(0,r.bF)(y.A,{open:c.value,color:"#ffffff",trigger:"click",overlayClassName:"tg-color-picker-popover",onOpenChange:function(e){c.value=e,n("update:open",e)}},{default:function(){return(0,r.bF)(i.Ay,{allowClear:!0,placeholder:e.placeholder,value:"transparent"===l.value?e.defaultValue:l.value,onClick:function(e){return e.currentTarget.select()},onInput:function(e){return d(e.target.value)},prefix:(0,r.bF)("div",{class:{"color-block":!0,"color-block-empty":!l.value},style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:l.value,cursor:"pointer",border:"1px solid #d9d9d9"}},null),addonAfter:u.value&&(0,r.bF)(b.A,{type:"text",onClick:function(e){e.stopPropagation(),p()},title:"使用吸管取色"},{default:function(){return[(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-color-picker"},null)]}})},null)},title:function(){return(0,r.bF)(g.A,{modelValue:l.value,"onUpdate:modelValue":d,onDragstart:function(e){e.preventDefault()},presetColors:["#ffffff","#ededed","#999999","gray","#666666","#333333","#000000","pink","red","blue","#92d826","green","yellow","orange","cyan","purple"]},null)}})]}})}}};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){if(!e)return null;var t=e.match(/linear-gradient\(([^,]+),([^)]+)\)/);if(!t)return null;var n=[];if(t[2].trim().split(",").map(function(e){return e.trim()}).forEach(function(e){var t=e.match(/([a-z]+|#[\da-fA-F]{3,6}|rgba?\([^)]+\))\s*(\d+%)?/);if(t){var r=t[1],o=t[2]?parseFloat(t[2]):void 0;n.push({color:r,offset:o})}}),n.length>1){var r=n.length-1;n.forEach(function(e,t){void 0===e.offset&&(e.offset=0===t?0:t===r?100:t/r*100)})}return n},T={name:"PropertyGradientColorPicker",props:C(C({},E.props),{},{gradient:{type:Boolean,default:!1}}),emits:["change","update:value"],setup:function(e,t){var n=t.attrs,i=t.emit,l=(0,o.KR)(90),a=(0,o.KR)(!1),u=(0,o.KR)([]),c=(0,o.KR)(0),s=(0,o.KR)(!1),p=(0,o.KR)(null),d=(0,o.KR)(!1),f=(0,o.KR)(!1),g=(0,o.KR)(!1),v=(0,o.KR)(!1),m=(0,o.KR)(-1),h=function(e){e.preventDefault(),a.value=!0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",w)},A=function(e){if(a.value){var t=document.querySelector(".angle-selector").getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2,o=e.clientX-n,i=e.clientY-r,u=180*Math.atan2(i,o)/Math.PI+90;u<0&&(u+=360),l.value=u,x()}},w=function(){a.value=!1,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",w)},F=function(){if(e.gradient){var t;if("string"==typeof e.value){var n=k(e.value);if(n&&n.length>=2)return void(u.value=n)}(null===(t=e.value)||void 0===t||null===(t=t.stops)||void 0===t?void 0:t.length)>=2?u.value=S(e.value.stops):u.value=[{color:"#ffffff",offset:0},{color:"#000000",offset:100}]}else u.value=[{color:e.value||"transparent",offset:0}]};(0,r.sV)(F),(0,r.wB)(function(){return e.gradient},function(){F(),x()}),(0,r.wB)(function(){return e.value},function(t){if(e.gradient){var n;if("string"==typeof t){var r=k(t);if(r&&r.length>=2)return void(u.value=r)}(null==t||null===(n=t.stops)||void 0===n?void 0:n.length)>=2&&(u.value=S(t.stops))}else u.value=[{color:t,offset:0}]});var O=(0,r.EW)(function(){if(!e.gradient)return"";var t=u.value.map(function(e){return"".concat(e.color||"transparent"," ").concat(e.offset,"%")}).join(", ");return["linear-gradient(to right, ".concat(t,")"),"linear-gradient(".concat(l.value,"deg, ").concat(t,")")]}),I=function(e){var t,n;if(d.value)d.value=!1;else{var r=e.currentTarget.getBoundingClientRect(),o=e.clientX-r.left,i=Math.min(100,Math.max(0,Math.round(o/r.width*100))),l=u.value.findIndex(function(e){return e.offset>=i});-1===l&&(l=u.value.length);var a=(null===(t=u.value[Math.max(0,l-1)])||void 0===t?void 0:t.color)||"#ffffff",s=(null===(n=u.value[Math.min(u.value.length-1,l)])||void 0===n?void 0:n.color)||"#000000",p=P(a,s,i/100);u.value.splice(l,0,{color:p,offset:i}),c.value=l,x(),g.value=!0}},P=function(e,t,n){return n<.5?e:t},C=function(t){if(s.value&&e.gradient&&p.value){var n=p.value.getBoundingClientRect(),r=t.clientX-n.left;r=Math.max(0,Math.min(r,n.width));var o,i=Math.round(r/n.width*100),l=u.value[c.value];if(0===c.value)l.offset=Math.min(i,(null===(o=u.value[1])||void 0===o?void 0:o.offset)-1||99);else if(c.value===u.value.length-1){var a;l.offset=Math.max(i,(null===(a=u.value[u.value.length-2])||void 0===a?void 0:a.offset)+1||1)}else{var d,g;l.offset=Math.max((null===(d=u.value[c.value-1])||void 0===d?void 0:d.offset)+1||0,Math.min(i,(null===(g=u.value[c.value+1])||void 0===g?void 0:g.offset)-1||100))}u.value.sort(function(e,t){return e.offset-t.offset}),c.value=u.value.findIndex(function(e){return e===l}),f.value=!0}},j=function(){s.value&&f.value&&x(),s.value=!1,f.value=!1,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",j)};(0,r.hi)(function(){document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",j)});var T=function(e){u.value[c.value].color=e,x()},x=function(){var t,n;e.gradient?t=O.value[1]:t=(null===(n=u.value[0])||void 0===n?void 0:n.color)||"transparent";i("update:value",t),i("change",t)};return function(){var t;return(0,r.bF)("div",{class:"tg-designer-property-comp tg-designer-property-comp-color-picker"},[e.gradient?(0,r.bF)("div",{class:"tg-designer-property-comp-gradient-picker-compact"},[(0,r.bF)(E,(0,r.v6)(e,n,{open:g.value,"onUpdate:open":function(e){return g.value=e},value:null===(t=u.value[c.value])||void 0===t?void 0:t.color,defaultValue:e.defaultValue,onChange:T}),null),(0,r.bF)("div",{class:"tg-designer-property-comp-gradient-wrapper"},[(0,r.bF)("div",{ref:p,class:"tg-designer-property-comp-gradient-bar",style:{"--background-image":O.value[0]},onClick:I},[u.value.map(function(e,t){return(0,r.bF)("div",{key:t,class:["tg-designer-property-comp-gradient-color-tag",{active:t===c.value}],style:{left:"".concat(e.offset,"%")},onClick:function(e){return function(e,t){s.value||(t.stopPropagation(),d.value=!0,m.value!==e&&g.value||(g.value=!g.value),v.value=!1,setTimeout(function(){d.value=!1,m.value=e},200))}(t,e)},onDblclick:function(e){return function(e,t){t.stopPropagation(),u.value.length<=2||(u.value.splice(e,1),c.value>=e&&(c.value=Math.max(0,Math.min(u.value.length-1,c.value-1))),x())}(t,e)},onMousedown:function(e){return function(e,t){t.preventDefault(),t.stopPropagation(),s.value=!0,c.value=e,document.addEventListener("mousemove",C),document.addEventListener("mouseup",j)}(t,e)}},[(0,r.bF)("div",{class:"tag-indicator",style:{backgroundColor:e.color},"data-offset":"".concat(e.offset,"%")},null)])})]),(0,r.bF)(y.A,{open:v.value,"onUpdate:open":function(e){return v.value=e},color:"#ffffff",trigger:"click",placement:"bottomRight"},{default:function(){return(0,r.bF)("div",{class:"tg-designer-property-comp-gradient-angle-selector-trigger","data-angle":"".concat(l.value,"°"),title:"选择渐变角度"},[(0,r.bF)(b.A,{type:"text",icon:(0,r.bF)("div",{class:"gradient-angle-selector-trigger-icon",style:{transform:"rotate(".concat(l.value,"deg)")}},[(0,r.bF)("div",{class:"indicator-line"},null)])},null)])},title:function(){return(0,r.bF)("div",{class:"tg-designer-property-comp-gradient-angle-selector"},[(0,r.bF)("div",{class:"angle-selector-label"},[(0,r.eW)("角度："),(+l.value).toFixed(0),(0,r.eW)("°")]),(0,r.bF)("div",{class:"angle-selector-foundation"},[(0,r.bF)("div",{class:"angle-selector",onMousedown:h,style:{"background-image":O.value[1]}},[(0,r.bF)("div",{class:"angle-indicator",style:{transform:"rotate(".concat(l.value,"deg)")}},[(0,r.bF)("div",{class:"angle-indicator-line"},null),(0,r.bF)("div",{class:"angle-handle"},null)])])])])}})])]):(0,r.bF)("div",{class:"tg-designer-property-comp-color-picker-wrapper"},[(0,r.bF)(E,(0,r.v6)(e,n,{open:g.value,"onUpdate:open":function(e){return g.value=e},value:e.value,defaultValue:e.defaultValue,onChange:T}),null)])])}}},x=(n(74423),n(21699),n(11392),n(23215),["layout","prop","modes"]);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _={name:"MultiInput",props:L(L({},(0,m.omitBy)(i.Ay.props,function(e,t){return t.startsWith("on")})),{},{value:{type:[String,Number],default:0},defaultValue:{type:[String,Number],default:0},prop:{type:String,required:!0},layout:{type:String,default:"full"},modes:{type:Array,default:function(){return["singleValue","dualValue","quadValue"]},validator:function(e){var t=["singleValue","dualValue","quadValue"];return e.every(function(e){return t.includes(e)})}}}),setup:function(e,t){var n=t.emit,l=t.slots,a=e.layout,u=(e.prop,e.modes),c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,x),s=(0,o.KR)(u[0]||"singleValue"),p=(0,o.Kh)({values:[]}),d=(0,o.KR)(!1);(0,r.wB)(function(){return e.value},function(e){if(d.value)d.value=!1;else{var t,n=function(e){var t;if("number"==typeof e||null==e||null===(t=e.includes)||void 0===t||!t.call(e," "))return{values:[e,e,e,e],detectedMode:"singleValue"};var n=e.split(" ");return 1===n.length?{values:[n[0],n[0],n[0],n[0]],detectedMode:"singleValue"}:2===n.length?{values:[n[0],n[1],n[0],n[1]],detectedMode:"dualValue"}:{values:n.slice(0,4),detectedMode:"quadValue"}}(e),r=n.values,o=n.detectedMode;p.values=r,t=o,u.includes(t)?s.value=o:s.value=u[0]}},{immediate:!0});var f=function(){d.value=!0,n("change",function(){switch(s.value){case"singleValue":return p.values[0];case"dualValue":return"".concat(p.values[0]," ").concat(p.values[1]);default:return p.values.join(" ")}}())},g=(0,m.debounce)(f,200),v=function(){var e=(u.indexOf(s.value)+1)%u.length,t=u[e];s.value=t,f()},y=function(t){return(0,r.bF)(i.Ay,(0,r.v6)(c,{disabled:e.disabled,value:p.values[t.sort],onClick:function(e){return e.currentTarget.select()},onInput:function(n){return function(t,n){var r,o=(null==t||null===(r=t.target)||void 0===r?void 0:r.value)||e.defaultValue;"singleValue"===s.value?p.values=[o,o,o,o]:"dualValue"===s.value?0===n?(p.values[0]=o,p.values[2]=o):(p.values[1]=o,p.values[3]=o):p.values[n]=o,g()}(n,t.sort)},onChange:g,onCompositionstart:function(e){return e.target.composing=!0},onCompositionend:function(e){e.target.composing=!1,e.target.dispatchEvent(new Event("input"))}}),{prefix:l[t.iconType]})},h={singleValue:"单值",dualValue:"双值",quadValue:"四值"};return function(){return(0,r.bF)("div",{class:{"tg-designer-property-comp":!0,"tg-designer-property-comp-multi-input":!0,disabled:e.disabled},onChange:function(e){return e.preventDefault=!0}},[(0,r.bF)("div",{class:B({"tg-designer-property-comp-multi-input-wrapper":!0},"singleValue"===s.value?"full":a,!0)},["singleValue"===s.value?[(0,r.bF)(y,{sort:0,key:"all",iconType:"all"},null)]:"dualValue"===s.value?[(0,r.bF)(y,{sort:0,key:"tb",iconType:"tb"},null),(0,r.bF)(y,{sort:1,key:"lr",iconType:"lr"},null)]:"quadValue"===s.value?[(0,r.bF)(y,{sort:0,key:"top",iconType:"top"},null),(0,r.bF)(y,{sort:3,key:"left",iconType:"left"},null),(0,r.bF)(y,{sort:2,key:"bottom",iconType:"bottom"},null),(0,r.bF)(y,{sort:1,key:"right",iconType:"right"},null)]:void 0]),u.length>1&&(0,r.bF)("div",{class:"tg-designer-property-expend"},[(0,r.bF)(b.A,{type:"text",title:"切换为".concat(h[u[(u.indexOf(s.value)+1)%u.length]],"模式"),disabled:e.disabled,onClick:v},{default:function(){return[(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-multi-input-expend"},null)]}})])])}}};var N={name:"PropertyImage",props:{value:{type:String,default:""}},setup:function(e,t){var n=t.emit,l=t.slots,a=(0,r.WQ)("propPanelCustomUpload",null),u=(0,o.KR)(e.value);(0,r.wB)(function(){return e.value},function(e){e!==u.value&&(u.value=e)}),(0,r.wB)(u,function(e){c({target:{value:e}})});var c=function(e){u.value=e.target.value,n("change",u.value)};return function(){return(0,r.bF)("div",{class:"tg-designer-property-comp tg-designer-property-comp-image"},[(0,r.bF)("div",{class:"tg-designer-property-comp-image-wrapper"},[(0,r.bF)(i.Ay,{value:u.value,onChange:c,allowClear:!0,maxLength:250,placeholder:"请输入图片地址"},{addonAfter:function(){return a?(0,r.bF)(a,{value:u.value,"onUpdate:value":function(e){return u.value=e}},"function"==typeof(e=l)||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.vv)(e)?l:{default:function(){return[l]}}):null;var e}})])])}}};n(8872);function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}var G={name:"MultiSelect",props:{options:{type:Array,default:function(){return[]},required:!0,validator:function(e){return e.every(function(e){return"object"===K(e)&&"label"in e&&"value"in e})}},value:{type:[Array,Object],default:function(){return[]}},disabled:{type:Boolean,default:!1},size:{type:String,default:"middle",validator:function(e){return["small","middle","large"].includes(e)}},returnObject:{type:Boolean,default:!1}},emits:["update:value","change"],setup:function(e,t){var n=t.emit,i=(0,o.KR)([]);(0,r.wB)(function(){return e.value},function(t){var n;i.value=(n=t,Array.isArray(n)?n:"object"===K(n)&&null!==n?e.options.reduce(function(e,t){var r=t.value;if(Object.prototype.hasOwnProperty.call(n,r)){var o=!0===n[r];t.negate?o||e.push(r):o&&e.push(r)}return e},[]):[])},{immediate:!0,deep:!0});var l=function(t){if(!e.disabled){var r=i.value.indexOf(t);-1===r?i.value.push(t):i.value.splice(r,1);var o=e.returnObject?e.options.reduce(function(e,t){var n=i.value.includes(t.value);return e[t.value]=t.negate?!n:n,e},{}):V(i.value);n("update:value",o),n("change",o)}},a=function(e){return i.value.includes(e)},u=function(t){return e.disabled||t.disabled},c=(0,r.EW)(function(){switch(e.size){case"small":return"tg-designer-multi-select-small";case"large":return"tg-designer-multi-select-large";default:return"tg-designer-multi-select-middle"}});return function(){return(0,r.bF)("div",{class:Q({"tg-designer-property-comp":!0,"tg-designer-multi-select":!0,"tg-designer-multi-select-disabled":e.disabled},c.value,!0),role:"group","aria-label":"多选分段控件"},[e.options.map(function(e){return(0,r.bF)("div",{key:e.value,class:{"tg-designer-multi-select-item":!0,"tg-designer-multi-select-item-selected":a(e.value),"tg-designer-multi-select-item-disabled":u(e)},onClick:function(){return!u(e)&&l(e.value)},"aria-checked":a(e.value),"aria-disabled":u(e),tabindex:u(e)?-1:0,onKeydown:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),l(e.value))},title:e.title},["function"==typeof e.label?e.label():e.label])})])}}},z=(n(37550),n(3296),n(27208),n(48408),{name:"PropertyBackgroundImage",emits:["change","update:value"],props:{value:{type:String,default:""},placeholder:{type:String,default:""}},setup:function(e,t){var n=t.emit,i=(0,o.KR)(!1),l=(0,o.KR)(!1),a=(0,o.KR)({mode:"image",bgi:e.value});(0,r.wB)(function(){return e.value},function(e){i.value?i.value=!1:(l.value||(!e||e.startsWith("url(")||e.startsWith("http://")||e.startsWith("https://")?a.value.mode="image":a.value.mode="color",l.value=!0),a.value.bgi=e)},{immediate:!0});var u=function(){i.value=!0,"image"===a.value.mode?(a.value.bgi="linear-gradient(90deg, #ffffff, #000000)",a.value.mode="color"):(a.value.bgi="",a.value.mode="image"),n("change",a.value.bgi),n("update:value",a.value.bgi)};var c=(0,m.debounce)(function(e){a.value.bgi=e,e&&"image"===a.value.mode&&!function(e){try{var t=new URL(e);if(!["http:","https:"].includes(t.protocol))return!1;var n=t.hostname.split(".");if(n.length<2||n.some(function(e){return!e}))return!1;var r=t.pathname.split("/").pop()||"",o=r.split(".").pop()||"";return r.includes(".")&&["png","jpg","jpeg","gif","bmp","webp"].includes(o.toLowerCase())}catch(e){return!1}}(e)||(n("change",e),n("update:value",e))},300),s=function(e){c(e)};return function(){return(0,r.bF)("div",{class:"tg-designer-property-comp tg-designer-property-background-image"},[(0,r.bF)("div",{class:"tg-designer-property-background-image-wrapper"},["image"===a.value.mode?(0,r.bF)(N,(0,r.v6)({value:a.value.bgi,onChange:s},e),{default:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-upload"},null)}}):(0,r.bF)(T,(0,r.v6)({value:a.value.bgi,gradient:!0,onChange:s},e),null)]),(0,r.bF)("div",{class:"tg-designer-property-expend"},[(0,r.bF)(b.A,{type:"text",title:"切换为".concat("image"===a.value.mode?"渐变色":"图片","模式"),disabled:e.disabled,onClick:u},{default:function(){return[(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-multi-input-expend"},null)]}})])])}}});function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H={width:function(e){return X("input",J(J({label:"宽度",title:"容器宽度（width）：支持填写百分数和数字，填写数字时的单位为像素",prop:"width",layout:"half"},e),{},{props:J({placeholder:"自适应",allowClear:!0},null==e?void 0:e.props),slots:{prefix:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-width"},null)}}}))},height:function(e){return X("input",J(J({label:"高度",title:"容器高度（height）：支持填写百分数和数字，填写数字时的单位为像素",prop:"height",layout:"half"},e),{},{props:J({placeholder:"自适应",allowClear:(!0).valueOf()},null==e?void 0:e.props),slots:{prefix:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-height"},null)}}}))},color:function(e){return X("colorPicker",J(J({label:"颜色",title:"颜色（color）",prop:"color"},e),{},{props:J({defaultValue:"#000000"},null==e?void 0:e.props)}))},fontSize:function(e){return X("inputNumber",J(J({label:"字号",title:"字体大小（font-size）",prop:"fontSize",layout:"half"},e),{},{props:J({min:12,max:50,placeholder:"14px"},null==e?void 0:e.props)}))},lineHeight:function(e){return X("input",J(J({label:"行高",title:"行高（line-height）",prop:"lineHeight",layout:"half"},e),{},{props:J({placeholder:"默认",allowClear:!0},null==e?void 0:e.props)}))},gap:function(e){return X("input",J(J({label:"组件间距",title:"各组件间的间隔距离（gap）",prop:"gap",layout:"half"},e),{},{props:J({placeholder:"0px",allowClear:!0},null==e?void 0:e.props),slots:{prefix:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-flex-row-gap"},null)}}}))},padding:function(e){return X("multiInput",J({label:"内边距",title:"容器的内边距（padding）",prop:"padding",props:J({layout:"half",placeholder:"0px",allowClear:!0},null==e?void 0:e.props),slots:{all:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-all"},null)},tb:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-padding-tb"},null)},lr:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-padding-lr"},null)},top:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-padding-top"},null)},bottom:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-padding-bottom"},null)},left:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-padding-left"},null)},right:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-padding-right"},null)}}},e))},margin:function(e){return X("multiInput",J(J({label:"外边距",title:"容器的外边距（margin）",prop:"margin"},e),{},{props:J({layout:"half",placeholder:"0px",allowClear:!0},null==e?void 0:e.props),slots:{all:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-all"},null)},tb:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-margin-tb"},null)},lr:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-margin-lr"},null)},top:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-margin-top"},null)},bottom:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-margin-bottom"},null)},left:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-margin-left"},null)},right:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-margin-right"},null)}}}))},overflow:function(e,t){return X("segmented",J(J({label:"容器溢出",title:[(0,r.bF)("span",null,[(0,r.eW)("当内容溢出容器设置的宽高时的处理方式（overflow）")]),(0,r.bF)("span",null,[(0,r.eW)("注意：此属性会受到容器的“宽度”、“高度”、“排列方向”、“多行显示”、“多列显示”等属性的影响")])],prop:"overflow"},e),{},{props:J({options:[{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-of-visible"},null)},value:"visible",title:"默认（visible）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-of-hidden"},null)},value:"hidden",title:"溢出部分隐藏（hidden）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-of-auto"},null)},value:"auto",title:"溢出自动隐藏且显示容器滚动条（auto）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-of-x"},null)},value:"auto hidden",title:"溢出自动隐藏且显示容器X轴滚动条（auto hidden）",disabled:"nowrap"!==(null==t?void 0:t.wrap)},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-of-y"},null)},value:"hidden auto",title:"溢出自动隐藏且自动显示容器Y轴滚动条（hidden auto）",disabled:"nowrap"!==(null==t?void 0:t.wrap)}]},null==e?void 0:e.props)}))},foreground:function(){return[X("colorPicker",{label:"颜色",title:"文字正常状态下的颜色（color）",prop:"color"}),X("colorPicker",{label:"悬浮颜色",title:"文字鼠标悬浮状态下的颜色（color）",prop:"hoverColor"}),X("colorPicker",{label:"选中颜色",title:"文字选中状态下的颜色（color）",prop:"selectedColor"})]},upload:function(e){if(null==e||!e.prop)throw new Error("propConfigForm配置错误：属性面板中使用上传功能时，prop为必传属性。");return X("image",J(J({label:"图片",title:"图片地址（可以输入一个完整的图片地址或上传一张图片）"},e),{},{props:J({placeholder:"请输入地址"},null==e?void 0:e.props),slots:{default:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-upload"},null)}}}))},background:function(e,t){var n,o=!(null==t||null===(n=t.style)||void 0===n||!n.backgroundImage);return[X("colorPicker",{label:"底色",title:"容器的背景颜色（background-color）",prop:"style.backgroundColor"}),X("backgroundImage",{label:"图片/渐变色",title:"设置容器的背景图片或背景渐变色（background-image）。注意：此属性会处于背景底色的上层。",prop:"style.backgroundImage",props:{placeholder:"透明"}}),X("multiInput",{label:"图片尺寸",title:"容器背景图片的尺寸（background-size）",prop:"style.backgroundSize",props:{disabled:!o,maxLength:20,layout:"half",placeholder:"自动",allowClear:!0,defaultValue:"",modes:["singleValue","dualValue"]},slots:{all:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-all"},null)},tb:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-width"},null)},lr:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-height"},null)}}}),X("segmented",{label:"图片位置",title:"容器背景图片的位置（background-position）",prop:"style.backgroundPosition",props:{disabled:!o,options:[{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-bp-center"},null)},value:"center",title:"容器正中央（center）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-bp-top"},null)},value:"top",title:"紧贴容器顶部（top）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-bp-bottom"},null)},value:"bottom",title:"紧贴容器底部（bottom）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-bp-left"},null)},value:"left",title:"紧贴容器左侧（left）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-bp-right"},null)},value:"right",title:"紧贴容器右侧（right）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-bp-inherit"},null)},value:"inherit",title:"继承（inherit）"}]}}),X("segmented",{label:"图片重复方式",title:"容器背景图片的重复方式（background-repeat）",prop:"style.backgroundRepeat",props:{disabled:!o,options:[{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-br-no-repeat"},null)},value:"no-repeat",title:"仅显示一张背景图片（no-repeat）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-br-repeat"},null)},value:"repeat",title:"图像重复显示，但图片可能会被裁剪（repeat）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-br-space"},null)},value:"space",title:"图像重复且均匀的显示在容器内，不会裁剪图片，但可能会有间隙（space）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-br-round"},null)},value:"round",title:"图像重复显示，自动缩放来消除间隙（round）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-br-repeat-x"},null)},value:"repeat-x",title:"图像沿X轴方向重复显示（repeat-x）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-br-repeat-y"},null)},value:"repeat-y",title:"图像沿Y轴方向重复显示（repeat-x）"}]}})]},justifyContent:function(e,t){var n,o="column"===(null==t||null===(n=t.style)||void 0===n?void 0:n.flexDirection);return X("segmented",J(J({label:"组件分布",title:"控制容器内组件在设定的排列方向上如何分布：靠拢或分散（justify-content）",prop:"justifyContent"},e),{},{props:J({options:[{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-jc-center",class:{column:o}},null)},value:"center",title:"居中靠拢（center）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-jc-start",class:{column:o}},null)},value:"flex-start",title:"".concat(o?"顶部":"左侧","靠拢（flex-start）")},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-jc-end",class:{column:o}},null)},value:"flex-end",title:"".concat(o?"底部":"右侧","靠拢（flex-end）")},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-jc-justify",class:{column:o}},null)},value:"space-between",title:"两侧分散（space-between）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-jc-sa",class:{column:o}},null)},value:"space-around",title:"环绕分散（space-around）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-jc-se",class:{column:o}},null)},value:"space-evenly",title:"均匀分散（space-evenly）"}]},null==e?void 0:e.props)}))},alignItems:function(e,t){var n,o="column"===(null==t||null===(n=t.style)||void 0===n?void 0:n.flexDirection);return X("segmented",J(J({label:"组件对齐",title:"控制容器内各部件的对齐方式（align-items）",prop:"alignItems"},e),{},{props:J({options:[{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-ai-center",class:{column2:o}},null)},value:"center",title:"居中对齐（center）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-ai-start",class:{column2:o}},null)},value:"flex-start",title:"".concat(o?"左侧":"顶部","对齐（flex-start）")},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-ai-end",class:{column2:o}},null)},value:"flex-end",title:"".concat(o?"右侧":"底部","对齐（flex-end）")},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-ai-stretch",class:{column2:o}},null)},value:"stretch",title:"拉伸对齐（stretch）"},{label:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-property-ai-baseline"},null)},value:"baseline",title:"基线对齐（baseline）"}]},null==e?void 0:e.props)}))},flexWrap:function(e,t){var n,r,o;return X("select",J(J({label:"多".concat("column"===(null==t||null===(n=t.style)||void 0===n?void 0:n.flexDirection)?"列":"行","显示"),title:"容器内组件的总宽度超过".concat("column"===(null==t||null===(r=t.style)||void 0===r?void 0:r.flexDirection)?"容器高度":"容器宽度","时").concat("column"===(null==t||null===(o=t.style)||void 0===o?void 0:o.flexDirection)?"另起一列":"另起一行","（flex-wrap）"),layout:"half",prop:"wrap"},e),{},{props:J({options:[{label:"否",value:"nowrap"},{label:"是",value:"wrap"}]},null==e?void 0:e.props)}))}},q=function(e){return{input:i.Ay,inputNumber:l.A,checkbox:a.Ay,checkboxGroup:u.A,radio:c.Ay,radioGroup:s.A,select:p.Ay,switch:d.Ay,colorPicker:T,segmented:f.A,multiInput:_,image:N,multiSelect:G,backgroundImage:z}[e]};function X(e,t,n){return{label:t.label,title:t.title||void 0,prop:t.prop,props:t.props,layout:t.layout||"full",slots:t.slots,modelProp:t.modelProp||"value",componentType:e,component:(0,o.IG)(q(e))}}},20249:function(e,t,n){n.d(t,{XU:function(){return i},_h:function(){return l},b1:function(){return o},n8:function(){return a}});const r=["width","height","minHeight","minWidth","top","left","right","bottom","margin","marginTop","marginLeft","marginRight","marginBottom","padding","paddingTop","paddingLeft","paddingRight","paddingBottom","fontSize","borderRadius","gap","columnGap","rowGap","backgroundSize"];function o(e){return Object.entries(e).reduce((e,[t,n])=>("number"!=typeof n&&isNaN(""===n?"unset":n)||!r.includes(t)?["padding","margin","backgroundSize"].includes(t)&&"string"==typeof n&&n.includes(" ")?e[t]=n.split(" ").map(e=>isNaN(""===e?"unset":e)?e:`${e}px`).join(" "):e[t]=n:e[t]=`${n}px`,e),{})}function i(e){let t="0px",n="0px";if(e.marginLeft||e.marginRight)t=e.marginLeft||"0px",n=e.marginRight||"0px";else if(e.margin){const r=e.margin.split(/\s+/);switch(r.length){case 1:t=r[0],n=r[0];break;case 2:case 3:t=r[1],n=r[1];break;case 4:t=r[3],n=r[1]}}return{marginLeft:t,marginRight:n}}function l(e){let t="0px",n="0px",r="0px",o="0px";if(e.paddingLeft||e.paddingRight||e.paddingTop||e.paddingBottom)t=e.paddingLeft||"0px",n=e.paddingRight||"0px",r=e.paddingTop||"0px",o=e.paddingBottom||"0px";else if(e.padding){const i=e.padding.split(/\s+/);switch(i.length){case 1:t=i[0],n=i[0],r=i[0],o=i[0];break;case 2:t=i[1],n=i[1],r=i[0],o=i[0];break;case 3:r=i[0],t=i[1],n=i[1],o=i[2];break;case 4:r=i[0],n=i[1],o=i[2],t=i[3]}}return{paddingTop:r,paddingRight:n,paddingBottom:o,paddingLeft:t}}function a(e){if(e){const t=e.trim();return/gradient\(/i.test(t)||/^url\(/i.test(t)?t:`url(${t})`}return e}},37195:function(e,t,n){n.d(t,{do:function(){return r},is:function(){return o},wP:function(){return i}});var r={TEMPLATE:"template",BASIC:"basic",LAYOUT:"layout"},o={template:"模板部件",basic:"基础部件",layout:"布局部件"},i={CANVAS:"canvas",MATERIAL:"material",MATERIAL_PREVIEW:"materialPreview",PREVIEW:"preview",PORTAL:"portal"}},42404:function(e,t,n){n.d(t,{D:function(){return r}});const r={UNSAVED:1,SAVING:2,SAVED:3}},61010:function(e,t,n){n.d(t,{V:function(){return r}});const r={calculateCompMidPoints(e,t,n,r=0){const o=t.map(t=>{const o=t.getBoundingClientRect();return("horizontal"===n?o.left+o.width/2:o.top+o.height/2)-("horizontal"===n?e.left:e.top)+("vertical"===n?r:0)});return"horizontal"===n&&o.sort((e,t)=>e-t),o},determineInsertIndex(e,t){if(0===t.length)return 0;let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>>1;e<t[o]?r=o-1:n=o+1}return n},isInsideAnyComponent(e,t,n,r){return t.some(t=>{const o=t.getBoundingClientRect(),i=o.top-n.top+r,l=o.bottom-n.top+r;return e>=i&&e<=l})},findDropContainer(e,t){let n=e.composedPath();n?.length||(n=this.getEventPath(e));let r,o=!0;const i=n.find(e=>e.classList?.contains("dragging")),l=i?.classList?.contains("tg-designer-layout-component");let a=n.find(e=>e instanceof Node&&((!l||!i.contains(e))&&e.classList?.contains("tg-designer-layout-container")));if(a?r=a.closest(".tg-designer-layout-component").dataset.id:(o=!1,a=n.find(e=>e.classList?.contains("tg-designer-canvas-container"))),!a)return null;const u=this.findNestedSchema(t,r,"children",t);return{isInsideLayoutContainer:o,dropContainer:a,schema:u.schema,parentId:u.parentId}},getEventPath(e){if(e.path)return e.path;const t=[];let n=e.target;for(;n&&n!==document.documentElement;)t.push(n),n=n.parentElement;return t},findNestedSchema(e,t,n="self",r=null){if(t){let o=0;for(const i of e){if(i.id===t)switch(n){case"parent":return{schema:r?.children??null,parentId:r?.id};case"self":return{schema:i,parentId:r?.id};default:return{schema:i.children,parentId:i.id}}if(i.children?.length){const e=this.findNestedSchema(i.children,t,n,i);if(e)return e}if(o>=e.length-1)return;o++}}return{schema:e,parentId:""}},calculateNestedLevel(e){return e?.closest(".tg-designer-layout-component")?.dataset?.nestedLevel||0},calculateNestedLevelById(e,t){let n=0;const r=(t,o)=>{t.forEach(t=>{t.id!==e?t.children&&r(t.children,o+1):n=o})};return r(t,1),n},calculateComponentPosition(e,t,n,r,o){if("horizontal"===o.direction){if(0===e)return Math.max(o.EDGE.OFFSET,t[0].offsetLeft-o.EDGE.OFFSET);if(e===t.length){const e=t[t.length-1];return e.offsetLeft+e.offsetWidth+o.EDGE.OFFSET}const r=t[e-1],i=t[e],l=(r.offsetLeft+r.offsetWidth+i.offsetLeft)/2,a=o.gap/2;return n>=l?i.offsetLeft-a:r.offsetLeft+r.offsetWidth+a}{if(0===e&&r.length>0&&n<r[0]-o.THRESHOLD.CONTAINER)return t[0].offsetTop-o.EDGE.OFFSET;if(0===e)return Math.max(o.EDGE.OFFSET,t[0].offsetTop-o.EDGE.OFFSET);if(e===t.length){const e=t[t.length-1];return e.offsetTop+e.offsetHeight+o.EDGE.OFFSET}const i=t[e-1],l=t[e],a=(i.offsetTop+i.offsetHeight+l.offsetTop)/2,u=o.gap/2;return n>=a?l.offsetTop-u:i.offsetTop+i.offsetHeight+u}},checkDragEdgeThreshold(e,t,n,r,o,i,l){if(0===o.length)return!1;const a="horizontal"===n,u=o.at(-1).getBoundingClientRect(),c=a?u.right-e.left:u.bottom-e.top+t,s=l?i.THRESHOLD.COMPONENT_AREA:i.THRESHOLD.CONTAINER;return r<c+(a?u.width:s)},getAdjustedPosition(e,t,n,r){return"horizontal"===r?e.clientX-n.left:e.clientY-n.top+t.scrollTop},getValidChildren(e){const t=Array.from(e).filter(e=>e.classList.contains("tg-designer-drag-component")),n=t.filter(e=>!e.classList.contains("dragging"));return{all:t,valid:n}},getLayoutInfoById(e){const t=document.querySelector(`[data-id="${e}"]`),n=t?.closest(".tg-designer-layout-container");if(!t||!n)return{isInGridLayout:!1,layoutDirection:"vertical"};const r=window.getComputedStyle(n);return{isInGridLayout:!!n.dataset?.cellPosition,layoutDirection:r.flexDirection.startsWith("row")?"horizontal":"vertical"}},createDragPreviewImage(e){const t=new Image;t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0);const n=e.currentTarget.cloneNode(!0),r=e.currentTarget.getBoundingClientRect(),o=document.createElement("div");o.style.cssText=`\n      position: fixed;\n      pointer-events: none;\n      z-index: 9999;\n      opacity: 0.8;\n      width: ${r.width}px;\n      height: ${r.height}px;\n      left: ${e.clientX+20}px;\n      top: ${e.clientY+30}px;\n      transform: translateZ(0); /* 启用GPU加速 */\n    `,o.appendChild(n),document.body.appendChild(o);const i=e=>{o.style.left=`${e.clientX+20}px`,o.style.top=`${e.clientY+30}px`};let l=!1;const a=()=>{l||(l=!0,window.removeEventListener("dragover",i),window.removeEventListener("drop",a),window.removeEventListener("dragend",a),clearTimeout(u),o.parentNode&&o.parentNode.removeChild(o))};window.addEventListener("dragover",i),window.addEventListener("drop",a),window.addEventListener("dragend",a);const u=setTimeout(a,1e4)},findNextEmptyPosition({elements:e,rowCount:t=2,colCount:n=2,position:r="0-0"}={}){const o=new Set(e.map(e=>e.cellPosition)),[i,l]=r.split("-");let a=parseInt(i,10),u=parseInt(l,10);for(let e=a;e<t;e++)for(let t=e===a?u+1:0;t<n;t++){const n=`${e}-${t}`;if(!o.has(n))return{row:e,col:t,position:n}}return null},checkAdjacentPositionInGridLayout({elements:e,position:t,direction:n,rowCount:r=2,colCount:o=2}={}){const i=new Set(e.map(e=>e.cellPosition)),[l,a]=t.split("-").map(Number);let u=l,c=a;switch(n){case"up":u--;break;case"down":u++;break;case"left":c--;break;case"right":c++;break;default:throw new Error("无效的搜索方向")}if(u<0||u>=r||c<0||c>=o)return null;const s=`${u}-${c}`;return{row:u,col:c,position:s,isEmptyAdjacentLocation:!i.has(s)}},checkPropertyPath(e,t,n){if("object"!=typeof e||null===e)return void 0!==n?{exists:!1,value:void 0,operation:"set: failed (invalid root)"}:{exists:!1,value:void 0};const r=t.split("."),o=r.length;if(void 0!==n){if(1===o){const t=r[0];return t in e?(e[t]=n,{exists:!0,value:n,operation:"set: success"}):{exists:!1,value:void 0,operation:`set: failed (missing path at root '${t}')`}}let t=e;for(let e=0;e<o-1;e++){const n=r[e];if(!(n in t))return{exists:!1,value:void 0,operation:`set: failed (missing path at '${r.slice(0,e+1).join(".")}')`};const o=t[n];if("object"!=typeof o||null===o)return{exists:!1,value:void 0,operation:`set: failed (invalid type at '${r.slice(0,e+1).join(".")}')`};t=o}const i=r[o-1];return i in t?(t[i]=n,{exists:!0,value:n,operation:"set: success"}):{exists:!1,value:void 0,operation:`set: failed (missing final property '${i}')`}}let i=e;for(let e=0;e<o;e++){const t=r[e];if(!(t in i))return{exists:!1,value:void 0};const n=i[t];if(e===o-1)return{exists:!0,value:n};if("object"!=typeof n||null===n)return{exists:!1,value:void 0};i=n}return{exists:!1,value:void 0}}}},65868:function(e,t,n){n.d(t,{U:function(){return q}});n(52675),n(89463),n(2259),n(45700),n(28706),n(2008),n(50113),n(23418),n(23792),n(34782),n(89572),n(62010),n(2892),n(83851),n(81278),n(79432),n(26099),n(27495),n(90906),n(38781),n(47764),n(98992),n(54520),n(72577),n(3949),n(23500),n(62953);var r=n(10810),o=n(37195),i=n(2543),l=n(98753),a=n(40698),u=n(20641),c=(n(62062),n(81454),n(64391)),s=n(13574),p=n(20249),d=n(50953);function f(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v={name:"MenuComp",emits:["menuClick"],props:{previewType:{type:String,required:!0},style:{type:Object,default:function(){return{}}},hoverColor:{type:String,default:""},selectedColor:{type:String,default:""},selectedKeys:{type:[Array,void 0],default:void 0},fieldNames:{type:Object,default:function(){return{key:"key",title:"title",disabled:"disabled"}}},dataSource:{type:Array,default:function(){return(0,i.range)(1,7,1).map(function(e){return{key:e,title:"导航样例".concat(e)}})}}},setup:function(e,t){var n=t.emit,r=(0,d.KR)(e),l=(0,d.KR)({});(0,u.wB)(r,function(e){r.value=e,l.value=(0,p.b1)(e.style||{}),l.value["--tg-designer-navigation-font-size"]=e.fontSize,e.previewType===o.wP.MATERIAL_PREVIEW?l.value.width&&"100%"!==l.value.width||(l.value.width="640px",l.value.height="auto"):(l.value["--tg-designer-navigation-color-selected"]=e.selectedColor,l.value["--tg-designer-navigation-color-hover"]=e.hoverColor)},{deep:!0,immediate:!0});var a=function(e){n("menuClick",e)};return function(){var t,n;return(0,u.bF)("div",{class:"tg-designer-navigation-wrapper",style:l.value},[(0,u.bF)(c.Ay,{class:"tg-designer-navigation",mode:"horizontal",selectedKeys:r.value.selectedKeys,onClick:a},(n=t=r.value.dataSource.map(function(t){return(0,u.bF)(c.Ay.Item,(0,u.v6)((0,i.omit)(t,"children"),{disabled:t[e.fieldNames.disabled],key:t[e.fieldNames.key],title:t[e.fieldNames.title]}),{default:function(){return[t[e.fieldNames.title]]}})}),"function"==typeof n||"[object Object]"===Object.prototype.toString.call(n)&&!(0,u.vv)(n)?t:{default:function(){return[t]}}))])}}},y={type:"a-menu",category:o.do.BASIC,name:"导航菜单",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-menu"},null):(0,u.bF)(v,e,null)},defaultProps:{hoverColor:"#000000e0",selectedColor:"#1677ff"},style:{width:"100%",height:"",color:"#000000e0",fontSize:14,padding:0,margin:0,backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundPosition:"center",backgroundRepeat:"no-repeat"},class:"",propConfigForm:function(e){return[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"布局",items:[s.O.padding(),s.O.margin()]},{label:"前景",items:[s.O.fontSize()].concat(f(s.O.foreground()))},{label:"背景",items:s.O.background(null,e)}]}},b=n(69722);var m={type:"a-image",category:o.do.BASIC,name:"图片",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-picture"},null):(0,u.bF)(b.Ay,(0,u.v6)(e,{fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==",placeholder:!0,preview:!1}),null)},defaultProps:{src:""},style:{width:"",height:""},class:"tg-designer-basic-image",propConfigForm:[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"数据",items:[s.O.upload({label:"图片",title:"图片地址（img标签支持的图片地址）",prop:"src"})]}]},h=n(44983),A={type:"a-button",category:o.do.BASIC,name:"按钮",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-button"},null):(0,u.bF)(h.A,e,{default:function(){return[e.slot]}})},defaultProps:{type:"primary",slot:"Button"},style:{width:"",height:""},class:"",propConfigForm:[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"数据",items:[(0,s.A)("input",{title:"按钮文本，最大限制10个字符",label:"按钮文本",prop:"slot",props:{allowClear:!0,maxLength:10,placeholder:"请输入按钮文本内容"}})]},{label:"外观",items:[(0,s.A)("select",{title:"按钮类型",label:"按钮类型",prop:"type",props:{options:[{label:"主要按钮",value:"primary"},{label:"次级按钮",value:"default"},{label:"虚线按钮",value:"dashed"}]}})]}]},w=n(80708),F={type:"a-input",category:o.do.BASIC,name:"文本框",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-input"},null):(0,u.bF)(w.Ay,(0,u.v6)(e,{readonly:e.previewType!==o.wP.PREVIEW}),null)},defaultProps:{placeholder:"请输入"},style:{width:"100%"},class:"",propConfigForm:[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"外观",items:[(0,s.A)("input",{title:"文本框占位符",label:"占位符",prop:"placeholder",props:{allowClear:!0}})]}]},E=(n(20781),n(94158)),O={type:"a-typography-text",category:o.do.BASIC,name:"文本",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-text"},null):(e.italic&&(e.style.fontStyle="italic"),(0,u.bF)(E.A,(0,u.v6)(e,{content:e.slot}),null))},defaultProps:{slot:"文本内容...",underline:!1,type:"",strong:!1,mark:!1,delete:!1,ellipsis:!1,italic:!1},style:{width:"",height:"",fontSize:14,lineHeight:"",color:""},class:"tg-designer-typography-text",propConfigForm:[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"数据",items:[(0,s.A)("input",{title:"文本内容（最大长度限制100）",label:"文本内容",prop:"slot",props:{maxLength:100,placeholder:"无",allowClear:!0}})]},{label:"外观",items:[(0,s.A)("inputNumber",{title:"字号",label:"字号",prop:"fontSize",layout:"half"}),(0,s.A)("input",{title:"行高",label:"行高",prop:"lineHeight",layout:"half",props:{placeholder:"默认",allowClear:!0}}),(0,s.A)("select",{title:"文本类型",label:"文本类型",prop:"type",layout:"half",props:{options:[{label:"主文本",value:""},{label:"次级文本",value:"secondary"},{label:"成功",value:"success"},{label:"警告",value:"warning"},{label:"失败",value:"danger"}]}}),(0,s.A)("colorPicker",{label:"颜色",title:"文字的颜色（color）",prop:"color",props:{placeholder:"无",allowClear:!0}}),(0,s.A)("multiSelect",{label:"样式",title:"",prop:"{props}",props:{returnObject:!0,options:[{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-italic"},null)},value:"italic",title:"斜体"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-underline"},null)},value:"underline",title:"下划线"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-delete"},null)},value:"delete",title:"删除线"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-strong"},null)},value:"strong",title:"加粗"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-mark"},null)},value:"mark",title:"标记"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-ellipsis"},null)},value:"ellipsis",title:"文字溢出自动显示省略号。当文本内容超过设置的宽度后生效"}]}})]}]},S=n(47564),I={type:"a-divider",category:o.do.BASIC,name:"分割线",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-line"},null):(0,u.bF)(S.A,e,{default:function(){return[e.slot]}})},defaultProps:{slot:"",dashed:!1,orientation:"center",plain:!1,type:"horizontal"},style:{width:"100%",height:""},class:"",propConfigForm:[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"数据",items:[(0,s.A)("input",{title:"分割线标题（显示在线条上的文本内容，最大长度限制10）",label:"分割线标题",prop:"slot",props:{maxLength:10,placeholder:"无",allowClear:!0}})]},{label:"外观",items:[(0,s.A)("segmented",{label:"标题位置",title:"分割线标题位置",prop:"orientation",layout:"half",props:{options:[{label:"左",value:"left"},{label:"中",value:"center"},{label:"右",value:"right"}]}}),(0,s.A)("segmented",{label:"方向",title:"分割线的方向",prop:"type",layout:"half",props:{options:[{label:"水平",value:"horizontal"},{label:"垂直",value:"vertical"}]}}),(0,s.A)("multiSelect",{label:"样式",title:"",prop:"{props}",layout:"half",props:{returnObject:!0,options:[{label:"虚",value:"dashed",title:"分割线显示为虚线"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-strong"},null)},value:"plain",negate:!0,title:"文字加粗"}]}})]}]},P=n(82659),C=[A,F,O,I,m,{type:"a-qrcode",category:o.do.BASIC,name:"二维码",preview:function(e){return e.previewType===o.wP.MATERIAL?(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-qrcode"},null):(0,u.bF)(P.A,e,null)},defaultProps:{value:"",icon:"",size:160,iconSize:40,bgColor:"#ffffff",color:"#000000",status:"active"},style:{},class:"tg-designer-basic-qrcode",propConfigForm:[{label:"尺寸",items:[(0,s.A)("inputNumber",{label:"尺寸",title:"二维码的宽度和高度值（单位为像素）",prop:"size",layout:"half"})]},{label:"数据",items:[(0,s.A)("input",{label:"扫描结果",title:"扫描二维码后得到的数据（最大限制100字符）",prop:"value",props:{placeholder:"请输入数据",maxLength:100,allowClear:!0}}),(0,s.A)("select",{title:"二维码状态",label:"二维码状态",prop:"status",layout:"half",props:{options:[{label:"正常",value:"active"},{label:"已过期",value:"expired"},{label:"加载中",value:"loading"},{label:"已扫描",value:"scanned"}]}})]},{label:"外观",items:[s.O.upload({label:"二维码图片",title:"显示在二维码中央的图片的地址",prop:"icon"}),(0,s.A)("colorPicker",{title:"二维码颜色",label:"二维码颜色",prop:"color",props:{defaultValue:"#000000"}}),(0,s.A)("colorPicker",{title:"背景色",label:"背景色",prop:"bgColor",props:{defaultValue:"#ffffff"}})]}]},y],j=n(20666),k=["previewType","children"];var T={type:"tg-layout-flex",category:o.do.LAYOUT,name:"弹性容器",preview:function(e){var t=e.previewType,n=e.children,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,k);var l;if(r.style.backgroundImage=(0,p.n8)(r.style.backgroundImage),t===o.wP.MATERIAL_PREVIEW)return r.style.backgroundImage="unset",(0,u.bF)(j.A,(0,u.v6)(r,{gap:8,wrap:"wrap",style:{padding:"8px"}}),"function"==typeof(a=l=(0,i.range)(0,4,1).map(function(e){return(0,u.bF)("div",{style:{background:"#d5d5d5",minHeight:"16px",width:"calc((100% - 16px) / 3)"}},null)}))||"[object Object]"===Object.prototype.toString.call(a)&&!(0,u.vv)(a)?l:{default:function(){return[l]}});if(t===o.wP.MATERIAL)return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-flex-layout"},null);var a;return(0,u.bF)(j.A,(0,u.v6)(r,{style:r.style,class:{"tg-designer-layout-container":!0,"has-background-image":!!r.style.backgroundImage||!!r.style.backgroundColor}}),{default:function(){return[null!=n&&n.length?n:""]}})},defaultProps:{gap:8,wrap:"nowrap",style:{}},style:{width:"100%",height:"",padding:16,margin:0,border:"",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",overflow:"visible",backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundPosition:"center",backgroundRepeat:"no-repeat"},class:"",children:[],canMoveInside:!0,canCopyInside:!0,propConfigForm:function(e){return[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"布局",items:[(0,s.A)("segmented",{label:"排列方向",title:"控制容器内元素的排列方向：横向排列或者纵向排列（flex-direction）",prop:"flexDirection",props:{block:!0,options:[{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-row"},null)},value:"row"},{label:function(){return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-property-column"},null)},value:"column"}]}}),s.O.justifyContent(null,e),s.O.alignItems(null,e),s.O.flexWrap(null,e),s.O.gap(),s.O.padding(),s.O.margin(),s.O.overflow(null,e)]},{label:"背景",items:s.O.background(null,e)}]}};var x=n(812),D=n(29966);function R(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,u.vv)(e)}var L={type:"tg-layout-grid",category:o.do.LAYOUT,name:"网格容器",preview:function(e){var t,n=e.previewType===o.wP.MATERIAL_PREVIEW,r={gutter:[e.gutterX,e.gutterY],wrap:e.wrap,justify:e.justify,style:{width:"100%"}},l={},a=e.rowCount,c=e.columnCount,s=(0,p.b1)(e.style);s.backgroundImage=(0,p.n8)(s.backgroundImage),n&&(a=2,c=2,s.backgroundImage="unset",s.padding="8px");var d=function(t,n){return e.children.find(function(e){return e.props["data-cell-position"]==="".concat(t,"-").concat(n)})};if(e.previewType===o.wP.MATERIAL)return(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-material-grid-layout"},null);return(0,u.bF)("div",{class:"tg-designer-layout-grid-container",style:s},[(0,u.bF)(j.A,{vertical:!0,wrap:"wrap",justify:"center",align:"center",gap:e.gutterY},R(t=(0,i.range)(0,a,1).map(function(e){var t;return(0,u.bF)(x.A,(0,u.v6)(r,{key:e}),R(t=(0,i.range)(0,c,1).map(function(t){return(0,u.bF)(D.A,{span:24/c,key:t},{default:function(){return[n?(0,u.bF)("div",{style:{background:"#d5d5d5",minHeight:"16px"}},null):(0,u.bF)("div",{style:l,class:"tg-designer-layout-container grid","data-cell-position":"".concat(e,"-").concat(t)},[d(e,t)])]}})}))?t:{default:function(){return[t]}})}))?t:{default:function(){return[t]}})])},defaultProps:{gutterX:8,gutterY:8,wrap:!1,justify:"center",style:{},rowCount:2,columnCount:2},style:{width:"100%",height:"",padding:0,margin:0,border:"",background:"",backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[],canMoveInside:!0,canCopyInside:!0,propConfigForm:function(e){return[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"布局",items:[(0,s.A)("inputNumber",{title:"水平间距",label:"列间距",prop:"gutterX",layout:"half"}),(0,s.A)("inputNumber",{title:"垂直间距",label:"行间距",prop:"gutterY",layout:"half"}),(0,s.A)("inputNumber",{title:"行数，取值区间 [1,10]",label:"行数",prop:"rowCount",layout:"half",props:{min:1,max:10}}),(0,s.A)("inputNumber",{title:"列数，取值区间 [1,4]",label:"列数",prop:"columnCount",layout:"half",props:{min:1,max:4}}),s.O.padding(),s.O.margin()]},{label:"背景",items:s.O.background(null,e)}]}};var B={type:"tg-layout-header",category:o.do.LAYOUT,name:"页头容器",preview:function(e){return e.previewType!==o.wP.MATERIAL?(0,u.bF)(_,e,null):(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-header"},null)},defaultProps:{contentWidth:"100%",contentPadding:0},style:{width:"100%",height:"",padding:5,margin:0,backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundPosition:"center",backgroundRepeat:"no-repeat"},class:"",children:[],propConfigForm:function(e){return[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"布局",items:[s.O.width({label:"内容宽度",title:"Header内展示内容区域容器的宽度（width）",prop:"contentWidth",props:{placeholder:"100%"}}),s.O.padding({label:"内容区域内边距",title:"Header内展示内容区域的容器内边距值（padding）",prop:"contentPadding"}),s.O.padding(),s.O.margin()]},{label:"背景",items:s.O.background(null,e)}]}},_={name:"Header",props:["contentWidth","contentPadding","style","previewType","children"],setup:function(e){var t=(0,d.KR)({}),n=e.previewType===o.wP.CANVAS||e.previewType===o.wP.MATERIAL_PREVIEW;(0,u.wB)(function(){return e.style},function(e){t.value=(0,p.b1)(e),t.value.backgroundColor||t.value.backgroundImage||(t.value.backgroundImage="linear-gradient(0deg,#31549c, #253a66, #191b25)")},{immediate:!0});var r=function(t){var n;return null===(n=e.children)||void 0===n?void 0:n.find(function(e){var n;return(null===(n=e.props)||void 0===n?void 0:n["data-cell-position"])===t})};return function(){return(0,u.bF)("div",{class:"tg-designer-layout-header",style:t.value},[(0,u.bF)("div",{class:"tg-designer-layout-header-content",style:(0,p.b1)({width:e.contentWidth||"100%",padding:e.contentPadding||0})},[(0,u.bF)("div",{class:"tg-designer-layout-header-logo"},[(0,u.bF)("div",{"data-cell-position":"image",class:{"tg-designer-layout-container":!0,"tg-designer-layout-image":!0,"is-design-patterns":n}},[r("image")]),(0,u.bF)("div",{"data-cell-position":"title",class:{"tg-designer-layout-container":!0,"tg-designer-layout-header-title":!0,"is-design-patterns":n}},[r("title")])]),(0,u.bF)("div",{"data-cell-position":"nav",class:{"tg-designer-layout-container":!0,"tg-designer-layout-header-nav":!0,"is-design-patterns":n}},[r("nav")])])])}}},N={type:"tg-layout-footer",category:o.do.LAYOUT,name:"页尾容器",preview:function(e){return e.previewType!==o.wP.MATERIAL?(0,u.bF)(Q,e,null):(0,u.bF)((0,u.g2)("IconFont"),{type:"icon-designer-footer"},null)},defaultProps:{contentWidth:"100%",contentPadding:0},style:{width:"100%",height:"",padding:5,margin:0,backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundPosition:"center",backgroundRepeat:"no-repeat"},class:"",children:[],propConfigForm:function(e){return[{label:"尺寸",items:[s.O.width(),s.O.height()]},{label:"布局",items:[s.O.width({label:"内容宽度",title:"Footer内展示内容区域容器的宽度（width）",prop:"contentWidth",props:{placeholder:"100%"}}),s.O.padding({label:"内容区域内边距",title:"Footer内展示内容区域的容器内边距值（padding）",prop:"contentPadding"}),s.O.padding(),s.O.margin()]},{label:"背景",items:s.O.background(null,e)}]}},Q={name:"Footer",props:["contentWidth","contentPadding","style","previewType","children"],setup:function(e,t){var n=t.attrs,r=(0,d.KR)({}),i=e.previewType===o.wP.CANVAS||e.previewType===o.wP.MATERIAL_PREVIEW;(0,u.wB)(function(){return e.style},function(e){r.value=(0,p.b1)(e),r.value.backgroundColor||r.value.backgroundImage||(r.value.backgroundColor="#101e75")},{immediate:!0});var l=function(t){var n;return null===(n=e.children)||void 0===n?void 0:n.find(function(e){var n;return(null===(n=e.props)||void 0===n?void 0:n["data-cell-position"])===t})};return function(){return(0,u.bF)("div",{class:"tg-designer-layout-footer",style:r.value},[(0,u.bF)("div",{class:"tg-designer-layout-footer-content",style:(0,p.b1)({width:e.contentWidth||"100%",padding:e.contentPadding||0})},[(0,u.bF)("div",{class:"tg-designer-layout-footer-content-left"},[(0,u.bF)("div",{"data-cell-position":"logo",class:{"tg-designer-layout-container":!0,"tg-designer-layout-logo":!0,"is-design-patterns":i}},[l("logo")]),(0,u.bF)("div",{"data-cell-position":"text",class:{"tg-designer-layout-container":!0,"tg-designer-layout-text":!0,"is-design-patterns":i}},[l("text")])]),"h5"!==n.device&&(0,u.bF)("div",{"data-cell-position":"qrcode",class:{"tg-designer-layout-container":!0,"tg-designer-layout-qrcode":!0,"is-design-patterns":i}},[l("qrcode")])])])}}},V=[T,L,B,N],M=[],K=n(42404);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var q=(0,r.nY)("editor",{state:function(){return{saveStatus:K.D.UNSAVED,isSchemaLoaded:!1,isSchemaChanged:!1,localCacheStatus:null,selectedComponent:null,schema:(0,i.cloneDeep)(l.w),selectedPlugin:{key:null},indicator:{containerType:"canvas",layoutDirection:"vertical",nestedLevel:0,type:"none",display:"none",lastValidIndex:-1,top:0,left:0,width:0,height:0},actionBar:{visible:!1,position:{x:0,y:0},canMoveInside:{},canCopyInside:{}},components:{basic:C,template:M,layout:V}}},actions:{registerMaterialComponents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.do.TEMPLATE;Array.isArray(e)&&this.$patch({components:U({},t,[].concat(J(this.components[t]),J(e)))})},createComponentSchema:function(e,t,n){var r=function(e){e.__initialized=!1,e.__animating=!0,e.children&&e.children.forEach(r)},i={id:"comp_".concat(Date.now(),"_").concat((0,a.yk)()),parentId:t,cellPosition:n,type:e.type,category:e.category,props:W(W({},e.defaultProps),{},{style:W(W({},e.defaultProps.style),e.style)}),children:e.category===o.do.LAYOUT?[]:void 0,__initialized:!1,__animating:!0};return r(i),i},copyLayoutComponentSchema:function(e){var t=(0,i.cloneDeep)(e);t.id="comp_".concat(Date.now(),"_").concat((0,a.yk)()),t.__initialized=!1,t.__animating=!0;var n=function(e){var t;if(null!==(t=e.children)&&void 0!==t&&t.length){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}(e.children);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.id="comp_".concat(Date.now(),"_").concat((0,a.yk)()),i.parentId=e.id,n(i,i.id)}}catch(e){o.e(e)}finally{o.f()}}};return n(t,t.id),t},updateComponent:function(e){if(!e)return this.selectedComponent=null,null;if("canvas"!==e.type){var t=this.getComponentByType(e.type,e.category);return t&&(t.id=e.id,t.parentId=e.parentId),this.selectedComponent=t,t}this.selectedComponent=e},getComponentByType:function(e,t){var n=this.components[t].find(function(t){return t.type===e});return n?(0,i.cloneDeep)(n):null}}})},83382:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var r=n(20641),o=(n(40875),n(79432),n(52675),n(89463),n(2259),n(23792),n(10287),n(26099),n(3362),n(71137),n(47764),n(98992),n(37550),n(62953),n(45700),n(28706),n(2008),n(62062),n(89572),n(2892),n(83851),n(81278),n(54520),n(3949),n(81454),n(23500),n(50953)),i=n(65868),l=n(2543),a=n(20249),u=(n(48980),n(54554),n(18787)),c=n(44983),s=n(41197),p=n(20377),d=n(55066),f=n(14208),g=n(30134),v=n(13709);var y=n(61010);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof a?r:a,c=Object.create(u.prototype);return F(c,"_invoke",function(n,r,o){var i,a,u,c=0,s=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,u=e,d.n=n,l}};function f(n,r){for(a=n,u=r,t=0;!p&&c&&!o&&t<s.length;t++){var o,i=s[t],f=d.p,g=i[2];n>3?(o=g===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,d.v=r,d.n=i[1]):f<g&&(o=n<3||i[0]>r||r>g)&&(i[4]=n,i[5]=r,d.n=g,a=0))}if(o||n>1)return l;throw p=!0,r}return function(o,s,g){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&f(s,g),a=s,u=g;(t=a<2?e:u)||!p;){i||(a?a<3?(a>1&&(d.n=-1),f(a,u)):d.n=u:d.v=u);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(p=d.n<0)?u:n.call(r,d))!==l)break}catch(t){i=e,a=1,u=t}finally{c=1}}return{value:t,done:p}}}(n,o,i),!0),c}var l={};function a(){}function u(){}function c(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(F(t={},r,function(){return this}),t),p=c.prototype=a.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,F(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=c,F(p,"constructor",c),F(c,"constructor",u),u.displayName="GeneratorFunction",F(c,o,"GeneratorFunction"),F(p),F(p,o,"Generator"),F(p,r,function(){return this}),F(p,"toString",function(){return"[object Generator]"}),(w=function(){return{w:i,m:d}})()}function F(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}F=function(e,t,n,r){function i(t,n){F(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},F(e,t,n,r)}function E(e,t,n,r,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){E(i,r,o,l,a,"next",e)}function a(e){E(i,r,o,l,a,"throw",e)}l(void 0)})}}var S={delete:{icon:(0,r.bF)(s.A,null,null),action:"delete",title:"删除"},copy:{icon:(0,r.bF)(p.A,null,null),action:"copy",title:"复制"},up:{icon:(0,r.bF)(d.A,null,null),action:"up",title:"上移"},down:{icon:(0,r.bF)(f.A,null,null),action:"down",title:"下移"},left:{icon:(0,r.bF)(g.A,null,null),action:"left",title:"左移"},right:{icon:(0,r.bF)(v.A,null,null),action:"right",title:"右移"}},I={name:"ComponentsActionBar",props:["containerRef"],setup:function(e){var t=(0,o.Kh)({layoutDirection:"vertical",isInGridLayout:!1}),n=(0,i.U)(),a=(0,o.KR)(null),s=(0,r.EW)(function(){return n.schema.components}),p=(0,r.EW)(function(){return n.selectedComponent}),d=(0,r.EW)(function(){return n.actionBar}),f=function(){const e=(0,i.U)(),t=(0,r.EW)(()=>e.actionBar),n=3,o=1,l=e=>new Promise(t=>requestAnimationFrame(()=>t(e.getBoundingClientRect())));return{updatePosition:async(e,r)=>{if(!t.value.visible||!r.value)return;const i=e.value?.querySelector('[data-selected="true"]');if(!i)return;const[a,u,c]=await Promise.all([l(e.value),l(i),l(r.value)]),s=a.width-c.width,p=a.height-c.height,d={x:u.right-a.left-c.width+n,y:u.bottom-a.top+o},f=Math.max(0,Math.min(d.x,s)),g=Math.max(0,Math.min(d.y,p));t.value.position={x:f+a.left,y:g+a.top}}}}(),g=f.updatePosition,v=(0,r.EW)(function(){var e,n=[S.delete],r=!0,o=!0;return null!==(e=p.value)&&void 0!==e&&e.parentId&&(r=d.value.canMoveInside[p.value.parentId],o=d.value.canCopyInside[p.value.parentId]),t.isInGridLayout?r&&n.push.apply(n,[S.up,S.down,S.left,S.right]):"horizontal"===t.layoutDirection?r&&n.push.apply(n,[S.left,S.right]):r&&n.push.apply(n,[S.up,S.down]),o&&n.push(S.copy),n});(0,r.wB)(p,function(){var n=O(w().m(function n(r){return w().w(function(n){for(;;)switch(n.n){case 0:d.value.visible=!1,null!=r&&r.type&&"canvas"!==r.type&&setTimeout(O(w().m(function n(){var o;return w().w(function(n){for(;;)switch(n.n){case 0:return d.value.visible=!0,n.n=1,g(e.containerRef,a);case 1:o=y.V.getLayoutInfoById(r.id),t.layoutDirection=o.layoutDirection,t.isInGridLayout=o.isInGridLayout;case 2:return n.a(2)}},n)})),200);case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()),(0,r.wB)(function(){var t;return null===(t=e.containerRef.value)||void 0===t?void 0:t.scrollTop},O(w().m(function t(){return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,g(e.containerRef,a);case 1:return t.a(2)}},t)})),{flush:"post"});var b=function(e,t,n){var r=y.V.checkAdjacentPositionInGridLayout({elements:e,position:e[t].cellPosition,direction:n,rowCount:p.value.rowCount,colCount:p.value.colCount});if(r)if(r.isEmptyAdjacentLocation)e.splice(e.length,0,h(h({},e[t]),{},{id:"__temp__"})),e[t].cellPosition=r.position,m(e,t,e.length-1),e.splice(t,1);else{var o=e.findIndex(function(e){return e.cellPosition===r.position});e[o].cellPosition=e[t].cellPosition,e[t].cellPosition=r.position,m(e,t,o)}},m=function(t,n,r){var o=e.containerRef.value.querySelector('[data-id="'.concat(p.value.id,'"]')).getBoundingClientRect(),i=[t[r],t[n]];t[n]=i[0],t[r]=i[1];var l=function(e){var t;e.__initialized=!0,e.__animating=!1,null===(t=e.children)||void 0===t||t.forEach(l)};requestAnimationFrame(function(){l(t[n])}),requestAnimationFrame(function(){var t=e.containerRef.value.querySelector('[data-id="'.concat(p.value.id,'"]')),n=t.getBoundingClientRect(),r=o.left-n.left,i=o.top-n.top;t.style.transform="translate(".concat(r,"px, ").concat(i,"px)"),t.style.transition="none",requestAnimationFrame(function(){t.style.transform="",t.style.transition="transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)"})})},A=(0,l.debounce)(function(e){var r=y.V.findNestedSchema(s.value,p.value.id,"parent").schema;r||(r=s.value);var o=r.findIndex(function(e){return e.id===p.value.id});if(-1!==o)if("delete"===e)!function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e[t].__initialized=!0,e[t].__animating=!0,setTimeout(function(){e.splice(t,1),r&&(n.selectedComponent=null)},200)}(r,o);else if("copy"===e){var i,l;if(t.isInGridLayout)if(null===(l=i=y.V.findNextEmptyPosition({elements:r,rowCount:p.value.rowCount,colCount:p.value.colCount,position:r[o].cellPosition}))||void 0===l||!l.position)return void u.Ay.warning("复制失败：没有可用的区域来放置新部件。");var a,c=n.copyLayoutComponentSchema(r[o]);if(t.isInGridLayout)c.cellPosition=null===(a=i)||void 0===a?void 0:a.position;!function(e,t,r,o){e.splice(t,+o,r),n.updateComponent({id:r.id,type:p.value.type,category:p.value.category}),setTimeout(function(){r.__initialized=!0,r.__animating=!1},300)}(r,o+1,c)}else if("up"===e||"left"===e){if(t.isInGridLayout)b(r,o,"up"===e?"up":"left");else if(o>0){if(r[o].__animating||!r[o].__initialized)return;m(r,o,o-1)}}else"down"!==e&&"right"!==e||(t.isInGridLayout?b(r,o,"down"===e?"down":"right"):o<r.length-1&&m(r,o,o+1))},50);return function(){return(0,r.bF)("div",{ref:a,class:"tg-designer-component-actions-bar",style:{display:d.value.visible?"flex":"none",left:"".concat(d.value.position.x,"px"),top:"".concat(d.value.position.y,"px")}},[v.value.map(function(e){var t=e.icon,n=e.action,o=e.title;return(0,r.bF)(c.A,{shape:"circle",size:"small",onClick:function(){return A(n)},icon:t,title:o},null)})])}}},P={name:"DragPlaceholder",setup:function(){var e=(0,i.U)(),t=(0,r.EW)(function(){return e.indicator}),n=(0,r.EW)(function(){return(0,a.b1)({top:t.value.top,left:t.value.left,width:t.value.width,height:t.value.height,display:t.value.display})});return function(){return(0,r.bF)("div",{class:"tg-designer-drag-placeholder",style:n.value,"data-nested-level":t.value.nestedLevel,"data-type":t.value.type,"data-layout-direction":t.value.layoutDirection,"data-container-type":t.value.containerType},null)}}},C=n(94282),j=n(37195),k=n(98753);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){R(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function R(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L={name:"CanvasRenderer",setup:function(){var e=(0,i.U)(),t=(0,r.EW)(function(){return e.schema}),n=(0,r.EW)(function(){return t.value.components}),u=(0,o.KR)(null),c=(0,o.KR)(null),s=(0,C.A)(),p=(0,r.EW)(function(){return e.selectedComponent}),d=(0,o.KR)(t.value.canvas.style);(0,r.wB)(function(){return t.value.canvas},function(e){d.value=(0,a.b1)(e.style);var t=(0,a._h)(d.value);t.paddingLeft=parseInt(t.paddingLeft)<3?"3px":t.paddingLeft,t.paddingRight=parseInt(t.paddingRight)<3?"3px":t.paddingRight,t.paddingTop=parseInt(t.paddingTop)<3?"3px":t.paddingTop,t.paddingBottom=parseInt(t.paddingBottom)<3?"3px":t.paddingBottom,d.value.padding="".concat(t.paddingTop," ").concat(t.paddingRight," ").concat(t.paddingBottom," ").concat(t.paddingLeft),d.value.backgroundImage=(0,a.n8)(d.value.backgroundImage)},{deep:!0,immediate:!0});var f=function(t){var n;t.target===t.currentTarget&&("canvas"===(null===(n=p.value)||void 0===n?void 0:n.type)?e.updateComponent():e.updateComponent({type:"canvas",id:"canvas-root",name:"画布",propConfigForm:k.i}))},g=function(t){var i,u,c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=e.getComponentByType(t.type,t.category);if(!f)return null;f=(0,o.IG)(f);var v=(0,l.omit)(D(D({},t.props),{},{class:f.class,style:(0,a.b1)(null!==(i=null===(u=t.props)||void 0===u?void 0:u.style)&&void 0!==i?i:{}),previewType:j.wP.CANVAS}),"flexDirection"),b=t.category===j.do.LAYOUT,m=(0,a.XU)(v.style),h={width:v.style.width?"calc(".concat(v.style.width," - ").concat(m.marginLeft," - ").concat(m.marginRight,")"):"",height:v.style.height,overflow:v.style.overflow,margin:v.style.margin};"marginLeft"in v.style&&(h.marginLeft=v.style.marginLeft),"marginRight"in v.style&&(h.marginRight=v.style.marginRight),v.style=(0,l.omit)(v.style,["margin","overflow"]),"a-image"!==f.type&&(v.style=(0,l.omit)(v.style,["width","height"]));var A,w,F="tg-designer-".concat(t.category,"-component");b&&(f.canMoveInside&&(e.actionBar.canMoveInside[t.id]=f.canMoveInside),f.canCopyInside&&(e.actionBar.canCopyInside[t.id]=f.canCopyInside),"tg-layout-flex"===t.type&&(h.flexDirection=t.props.vertical?"column":"row"),v.children=null!==(A=null===(w=t.children)||void 0===w?void 0:w.map(function(e){return g(e,t.id)}))&&void 0!==A?A:[]);return(0,r.bF)("div",{key:t.id,"data-id":t.id,"data-parent-id":d,"data-selected":(null===(c=p.value)||void 0===c?void 0:c.id)===t.id,"data-nested-level":y.V.calculateNestedLevelById(t.id,n.value),"data-cell-position":t.cellPosition,draggable:!0,class:R(R(R(R(R({},F,!0),"tg-designer-drag-component",!0),"dragging",t.__dragging),"component-enter-active",t.__animating&&!t.__initialized),"component-leave-active",t.__animating&&t.__initialized),style:h,onClick:function(n){return function(t,n,r){var i;t.stopPropagation(),n.id===(null===(i=p.value)||void 0===i?void 0:i.id)?e.updateComponent():e.updateComponent(D(D({},(0,o.ux)(n)),{},{propConfigForm:r.propConfigForm}))}(n,t,f)},onDragstart:function(e){return function(e,t){t.__dragging=!0,y.V.createDragPreviewImage(e),s.handleDragStart(e,t),e.stopPropagation()}(e,t)},onDragend:function(e){return function(e,t){t.__dragging=!1,t.__initialized||(t.__initialized=!0),s.handleDragEnd(e)}(e,t)}},[f.preview(v)])};return function(){var o;return(0,r.bF)("div",{class:"tg-designer-canvas-layout"},[(0,r.bF)("div",(0,r.v6)({ref:u},(0,l.omit)(t.value.canvas,["class","style"]),{"data-selected":"canvas"===(null===(o=p.value)||void 0===o?void 0:o.type),class:["tg-designer-canvas-container",R({},t.value.canvas.class,!0)],style:D(D({},d.value),{},{overflowY:"container"===e.indicator.type?"hidden":"auto"}),onClick:f,onDrop:function(e){return s.handleDrop(e,u)},onDragover:function(e){return s.handleDragOver(e,u)},onDragend:s.handleDragEnd,onDragleave:s.handleDragLeave}),[n.value.map(g),(0,r.bF)(I,{containerRef:u},null),(0,r.bF)(P,{ref:function(e){return c.value=e.$el}},null)])])}}},B=(n(74423),n(62010),n(69085),n(38781),n(21699),n(40983)),_=n(15456),N=n(73699),Q=["style"];function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){G(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.vv)(e)}var W={name:"PropertyPanel",setup:function(){var e=(0,i.U)(),t=(0,r.EW)(function(){return e.schema}),n=(0,r.EW)(function(){return e.selectedComponent}),u=(0,r.EW)(function(){return y.V.findNestedSchema(t.value.components,n.value.id).schema}),c=(0,r.EW)(function(){if(!e.selectedComponent)return{};if("canvas"===e.selectedComponent.type)return t.value.canvas;var r,o,i,l,a,c,s=null!==(r=null===(o=u.value)||void 0===o?void 0:o.props)&&void 0!==r?r:{},p=null!==(i=null===(l=n.value)||void 0===l?void 0:l.defaultProps)&&void 0!==i?i:{},d=K(K({},null===(a=n.value)||void 0===a?void 0:a.defaultProps.style),null===(c=n.value)||void 0===c?void 0:c.style),f=s.style,g=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(s,Q);return K(K(K({},p),g),{},{style:K(K({},d),f)})}),s=function(e,t,n){var r,o,i,l,a=n&&"value"!==n?null!==(r=null===(o=e.target)||void 0===o?void 0:o[n])&&void 0!==r?r:e:null!==(i=null===(l=e.target)||void 0===l?void 0:l.value)&&void 0!==i?i:e;if("{props}"===t&&"[object Object]"===Object.prototype.toString.call(a))Object.assign(c.value,a);else{var u=y.V.checkPropertyPath(c.value,t,a);if(!u.exists){if(t.includes("."))throw new Error(u.operation);c.value.style[t]=a}}},p=(0,l.debounce)(function(){var n;"canvas"===(null===(n=e.selectedComponent)||void 0===n?void 0:n.type)?e.schema.canvas=t.value.canvas:u.value.props=c.value},200),d=function(e){return"function"==typeof e&&(e=e(c.value)),e.map(function(e){if("items"in e)return(0,r.bF)("div",{class:"tg-designer-field-group"},[(0,r.bF)("div",{class:"tg-designer-field-title"},[e.label]),(0,r.bF)("div",{class:"tg-designer-field-content"},[d(e.items)])]);var t=(0,o.IG)(e.component),n=K({},e.props);if(e.modelProp)if("{props}"===e.prop)n[e.modelProp]=c.value;else{var i=y.V.checkPropertyPath(c.value,e.prop);if(i.exists)n[e.modelProp]=i.value;else{if(e.prop.includes("."))throw new Error("".concat(e.prop," is not a valid property path"));n[e.modelProp]=c.value.style[e.prop]}}var l,u=(0,a.b1)({width:"full"===e.layout?"100%":"calc((100% - 10px) / 2)"});return(0,r.bF)("div",{key:e.prop,class:"tg-designer-form-item",style:u},[e.label&&(0,r.bF)("label",null,[e.label,e.title&&(0,r.bF)(B.A,{placement:"topLeft",title:e.title,overlayClassName:"tg-tooltip-format"},{default:function(){return[(0,r.bF)(N.A,null,null)]}})]),(0,r.bF)("div",{class:"tg-designer-form-item-control"},[(l=null,e.slots&&(l=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&!n.includes("_")&&(t[n]=e[n]);return t}((0,o.ux)(e.slots))),"input"===e.componentType?(0,r.bF)(t,(0,r.v6)(n,{onClick:function(e){return e.currentTarget.select()},onInput:function(t){return s(t,e.prop,e.modelProp)},onChange:p,onCompositionstart:function(e){return e.target.composing=!0},onCompositionend:function(e){e.target.composing=!1,e.target.dispatchEvent(new Event("input"))}}),z(l)?l:{default:function(){return[l]}}):("multiInput"===e.componentType&&(n.prop=e.prop),(0,r.bF)(t,(0,r.v6)(n,{onChange:function(t){t.preventDefault||function(e,t,n){s(e,t,n),p()}(t,e.prop,e.modelProp)}}),z(l)?l:{default:function(){return[l]}})))])])})};return function(){var e;return null!==(e=n.value)&&void 0!==e&&e.propConfigForm?(0,r.bF)("div",{class:"tg-designer-property-container"},[(0,r.bF)("div",{class:"tg-designer-property-comp-type"},[j.is[n.value.category],!!j.is[n.value.category]&&" - ",n.value.name]),(0,r.bF)("div",{class:"tg-designer-property-scrollable tg-designer-scrollable"},[d((0,o.ux)(n.value.propConfigForm))])]):(0,r.bF)("div",{class:"tg-designer-property-container"},[(0,r.bF)(_.A,{description:"未选中任何组件",image:_.A.PRESENTED_IMAGE_SIMPLE},null)])}}},U=n(37543),J=n(71250),Y=n(47564),H=n(94735);class q{static STORAGE_KEY="tg-designer-schema";static save(e,t){const n=JSON.parse(sessionStorage.getItem(this.STORAGE_KEY)||"{}");n[e]=t,sessionStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))}static load(e){return JSON.parse(sessionStorage.getItem(this.STORAGE_KEY)||"{}")[e]||null}static list(){const e=JSON.parse(sessionStorage.getItem(this.STORAGE_KEY)||"{}");return Object.keys(e)}}var X=n(42404);n(75192);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=Object.freeze({__MATERIALS__:Symbol("materials"),__TEMPLATES__:Symbol("templates"),__DATA__:Symbol("data"),__PAGES__:Symbol("pages"),__PREVIEW__:Symbol("preview")}),ne={name:"Plugins",props:{plugins:{type:Object,default:function(){return{}}}},setup:function(e,t){var o=t.expose,l=(0,i.U)(),a=(0,r.EW)(function(){return l.selectedPlugin}),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(ee(ee(ee(ee({},te.__MATERIALS__,{name:"物料",icon:"icon-designer-materials",panel:(0,r.$V)(function(){return n.e(873).then(n.bind(n,21873))})}),te.__TEMPLATES__,{name:"模板",icon:"icon-designer-templates",panel:(0,r.$V)(function(){return n.e(10).then(n.bind(n,23010))})}),te.__DATA__,{name:"数据",icon:"icon-designer-data",panel:(0,r.$V)(function(){return n.e(488).then(n.bind(n,15488))})}),te.__PAGES__,{name:"页面",icon:"icon-designer-pages",panel:(0,r.$V)(function(){return n.e(651).then(n.bind(n,20651))})}),e.plugins);return(0,r.sV)(function(){l.selectedPlugin.key=te.__MATERIALS__}),o({getPluginContent:function(){return u[a.value.key].panel||null}}),function(){return(0,r.bF)("div",{class:"tg-designer-plugins-content"},[Reflect.ownKeys(u).map(function(e){return(0,r.bF)("div",{key:e,class:{"tg-designer-plugin":!0,selected:e===a.value.key},onClick:function(){return l.selectedPlugin.key=e}},[(0,r.bF)((0,r.g2)("IconFont"),{type:u[e].icon},null),(0,r.bF)("div",null,[u[e].name])])})])}}};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof a?r:a,c=Object.create(u.prototype);return ie(c,"_invoke",function(n,r,o){var i,a,u,c=0,s=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,u=e,d.n=n,l}};function f(n,r){for(a=n,u=r,t=0;!p&&c&&!o&&t<s.length;t++){var o,i=s[t],f=d.p,g=i[2];n>3?(o=g===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,d.v=r,d.n=i[1]):f<g&&(o=n<3||i[0]>r||r>g)&&(i[4]=n,i[5]=r,d.n=g,a=0))}if(o||n>1)return l;throw p=!0,r}return function(o,s,g){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&f(s,g),a=s,u=g;(t=a<2?e:u)||!p;){i||(a?a<3?(a>1&&(d.n=-1),f(a,u)):d.n=u:d.v=u);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(p=d.n<0)?u:n.call(r,d))!==l)break}catch(t){i=e,a=1,u=t}finally{c=1}}return{value:t,done:p}}}(n,o,i),!0),c}var l={};function a(){}function u(){}function c(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ie(t={},r,function(){return this}),t),p=c.prototype=a.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ie(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=c,ie(p,"constructor",c),ie(c,"constructor",u),u.displayName="GeneratorFunction",ie(c,o,"GeneratorFunction"),ie(p),ie(p,o,"Generator"),ie(p,r,function(){return this}),ie(p,"toString",function(){return"[object Generator]"}),(oe=function(){return{w:i,m:d}})()}function ie(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ie=function(e,t,n,r){function i(t,n){ie(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},ie(e,t,n,r)}function le(e,t,n,r,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function ae(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){le(i,r,o,l,a,"next",e)}function a(e){le(i,r,o,l,a,"throw",e)}l(void 0)})}}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se={name:"TGDesignerHeader",props:{schemaId:{type:[String,null]},plugins:{type:Object,default:function(){return{}}},updateSchemaApi:{type:Function}},setup:function(e,t){var n=t.expose,a=t.slots,s=null,p=null,d=(0,i.U)(),f=(0,r.EW)(function(){return d.schema}),g=(0,r.EW)(function(){return d.isSchemaLoaded}),v=(0,r.EW)({get:function(){return d.saveStatus},set:function(e){return d.saveStatus=e}}),y=(0,r.EW)({get:function(){return d.isSchemaChanged},set:function(e){return d.isSchemaChanged=!!e}}),b=(0,r.EW)({get:function(){return d.localCacheStatus},set:function(e){return d.localCacheStatus=!!e}}),m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach(function(t){ce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(ce({},te.__PREVIEW__,{name:"预览",icon:"icon-designer-tool-preview",onClick:function(){}}),e.plugins),h=(0,l.debounce)(ae(oe().m(function t(){return oe().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,q.save(e.schemaId,(0,o.ux)(f.value));case 1:b.value=!0;case 2:return t.a(2)}},t)})),15e3),A=function(){p=setInterval(ae(oe().m(function e(){return oe().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,F(!0);case 1:return e.a(2)}},e)})),3e4)},w=(0,r.wB)(g,function(e){e&&(b.value=e,h(),(0,r.wB)(f,function(){clearTimeout(s),y.value=!0,b.value=!1,v.value=X.D.UNSAVED,h()},{deep:!0}),w())});window.addEventListener("beforeunload",function(e){v.value!==X.D.SAVED&&e.preventDefault()}),(0,r.sV)(ae(oe().m(function e(){return oe().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,A();case 1:return e.a(2)}},e)}))),(0,r.hi)(function(){clearInterval(p),h.cancel()});var F=function(){var t=ae(oe().m(function t(n){var r;return oe().w(function(t){for(;;)switch(t.p=t.n){case 0:if(b.value||h.flush(),!e.schemaId||!y.value){t.n=6;break}if(v.value=X.D.SAVING,t.p=1,"function"!=typeof e.updateSchemaApi){t.n=3;break}return t.n=2,e.updateSchemaApi(f.value);case 2:r=t.v,t.n=4;break;case 3:r={status:!0};case 4:r.status?(v.value=X.D.SAVED,n||(clearInterval(p),A(),u.Ay.success("保存成功"))):v.value=X.D.UNSAVED,s=setTimeout(function(){return y.value=!1},3e3),t.n=6;break;case 5:t.p=5,t.v,v.value=X.D.UNSAVED;case 6:return t.a(2)}},t,null,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),E=function(){var e=ae(oe().m(function e(t){var n,r=arguments;return oe().w(function(e){for(;;)switch(e.n){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],t&&(d.schema=t),b.value=!1,y.value=!0,v.value=X.D.UNSAVED,e.n=1,F(!n);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e;null!==(e=f.value.components)&&void 0!==e&&e.length&&(d.schema.components=[],v.value=X.D.UNSAVED)};return n({updateSchema:E}),function(){var e;return(0,r.bF)("div",{class:"tg-designer-tools"},[(0,r.bF)("div",{class:"tg-designer-functions"},[a.logo?a.logo():(0,r.bF)("div",{class:"tg-designer-logo"},[(0,r.bF)("div",{class:"tg-designer-logo-text"},[(0,r.eW)("在线页面设计器")]),(0,r.bF)("div",{class:"tg-designer-logo-sub-text"},[(0,r.eW)("Online Page Designer")])]),(0,r.bF)("div",{class:"tg-designer-canvas-functions"},[(0,r.bF)(c.A,{danger:!0,type:"text",disabled:!(null!==(e=f.value.components)&&void 0!==e&&e.length),icon:(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-tool-clear-canvas"},null),title:"清空画布",onClick:O},null),(0,r.bF)(c.A,{type:"text",disabled:!0,icon:(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-tool-undo"},null),title:"撤销（建设中）"},null),(0,r.bF)(c.A,{type:"text",disabled:!0,icon:(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-tool-redo"},null),title:"重做（建设中）"},null),(0,r.bF)(Y.A,{type:"vertical"},null),(0,r.bF)(H.A,{dot:y.value,offset:[-6,4],status:["error","processing","success"][v.value-1]},{default:function(){return[(0,r.bF)(c.A,{type:"text",disabled:v.value!==X.D.UNSAVED||!y.value,icon:(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-designer-tool-save"},null),title:"保存",onClick:function(){return F()}},null)]}}),Reflect.ownKeys(m).map(function(e){return(0,r.bF)(c.A,{type:"text",icon:(0,r.bF)((0,r.g2)("IconFont"),{type:m[e].icon},null),title:m[e].name,onClick:function(){return t=m[e].onClick,h.flush(),void t();var t}},null)})]),(0,r.bF)("div",{class:"tg-designer-status-indicators"},[(0,r.bF)(H.A,{dot:null!==b.value,offset:[-6,10],status:b.value?"success":"error"},{default:function(){return[(0,r.bF)(B.A,{placement:"topRight",overlayClassName:"tg-tooltip-format"},{title:function(){return[null!==b.value&&(0,r.bF)("p",null,[(0,r.eW)("最新改动本地"),b.value?"已":"暂未",(0,r.eW)("缓存。")]),(0,r.bF)("span",null,[(0,r.eW)("设计器会自动在本地定期缓存所有改动，策略如下：")]),(0,r.bF)("span",null,[(0,r.eW)("1、关闭页面会丢失所有缓存；")]),(0,r.bF)("span",null,[(0,r.eW)("2、刷新页面不会丢失缓存；")]),(0,r.bF)("span",null,[(0,r.eW)("3、向服务器保存时，状态指示条显示，并同步更新本地缓存；")]),(0,r.bF)("span",null,[(0,r.eW)("4、预览前，更新本地缓存，但不更新服务器数据，状态指示条不显示；")]),(0,r.bF)("span",null,[(0,r.eW)("5、更新本地缓存为静默更新，状态指示条不显示。")])]},default:function(){return(0,r.bF)((0,r.g2)("IconFont"),{type:"icon-header-cache-status"},null)}})]}})])]),v.value===X.D.SAVING&&(0,r.bF)("div",{class:"tg-designer-save-status-bar"},[(0,r.bF)("div",{class:"tg-designer-save-progress"},null)])])}}};function pe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof a?r:a,c=Object.create(u.prototype);return de(c,"_invoke",function(n,r,o){var i,a,u,c=0,s=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,u=e,d.n=n,l}};function f(n,r){for(a=n,u=r,t=0;!p&&c&&!o&&t<s.length;t++){var o,i=s[t],f=d.p,g=i[2];n>3?(o=g===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,d.v=r,d.n=i[1]):f<g&&(o=n<3||i[0]>r||r>g)&&(i[4]=n,i[5]=r,d.n=g,a=0))}if(o||n>1)return l;throw p=!0,r}return function(o,s,g){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&f(s,g),a=s,u=g;(t=a<2?e:u)||!p;){i||(a?a<3?(a>1&&(d.n=-1),f(a,u)):d.n=u:d.v=u);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(p=d.n<0)?u:n.call(r,d))!==l)break}catch(t){i=e,a=1,u=t}finally{c=1}}return{value:t,done:p}}}(n,o,i),!0),c}var l={};function a(){}function u(){}function c(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(de(t={},r,function(){return this}),t),p=c.prototype=a.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,de(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=c,de(p,"constructor",c),de(c,"constructor",u),u.displayName="GeneratorFunction",de(c,o,"GeneratorFunction"),de(p),de(p,o,"Generator"),de(p,r,function(){return this}),de(p,"toString",function(){return"[object Generator]"}),(pe=function(){return{w:i,m:d}})()}function de(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}de=function(e,t,n,r){function i(t,n){de(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},de(e,t,n,r)}function fe(e,t,n,r,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){fe(i,r,o,l,a,"next",e)}function a(e){fe(i,r,o,l,a,"throw",e)}l(void 0)})}}function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}var ye={name:"TGDesigner",props:{schemaId:{type:[String,null]},loading:{type:Boolean,default:!1},propPanelCustomUpload:{type:Object,default:function(){return null}},getSchemaApi:{type:Function},updateSchemaApi:{type:Function},plugins:{type:[Object,Function],default:function(){return{}}}},setup:function(e,t){var n=t.slots;(0,r.Gt)("propPanelCustomUpload",e.propPanelCustomUpload);var l=(0,o.KR)((0,r.bF)("div",null,[(0,r.eW)("加载中...")])),a=(0,o.KR)(null),c=(0,o.KR)(null),s=(0,o.KR)({}),p=(0,i.U)(),d=(0,r.EW)(function(){return p.selectedPlugin.key}),f={},g="function"==typeof e.plugins?e.plugins(te):e.plugins;return Reflect.ownKeys(g).some(function(e){return"symbol"!==ve(e)})&&(f=g.tools||{},g=g.plugins||{}),(0,r.wB)(d,function(e){e&&(s.value={designerStore:p,updateSchema:c.value.updateSchema},l.value=(0,o.IG)(a.value.getPluginContent()))}),(0,r.sV)(ge(pe().m(function t(){var n,r,o,i;return pe().w(function(t){for(;;)switch(t.n){case 0:if("function"!=typeof e.getSchemaApi){t.n=3;break}return t.n=1,e.getSchemaApi();case 1:if(r=t.v){t.n=2;break}throw u.Ay.error("初始化失败！"),new Error("未从“getSchemaApi”函数中获取到有效的schema数据！");case 2:t.n=4;break;case 3:r={id:"__BUILT_IN_SCHEMA_ID__"};case 4:null!==(n=r)&&void 0!==n&&n.id&&(o={isSchemaLoaded:!0,saveStatus:X.D.SAVED},r.schema?o.schema=JSON.parse(r.schema):(i=q.load(r.id))&&(o.schema=i),q.save(r.id,o.schema||p.schema),p.$patch(o));case 5:return t.a(2)}},t)}))),function(){return(0,r.bF)(U.Ay,{class:"tg-designer-container"},{default:function(){return[(0,r.bF)(J.A,{spinning:e.loading},{default:function(){return[(0,r.bF)(U.Ay,{class:"tg-designer-header"},{default:function(){return[(0,r.bF)(se,{ref:c,schemaId:"function"==typeof e.getSchemaApi?e.schemaId:"__BUILT_IN_SCHEMA_ID__",plugins:f,updateSchemaApi:e.updateSchemaApi},{logo:n.logo})]}}),(0,r.bF)(U.Ay,null,{default:function(){return[(0,r.bF)(U.Ay.Sider,{width:68,class:"tg-designer-plugins-wrapper"},{default:function(){return[(0,r.bF)(ne,{ref:a,plugins:g},null)]}}),(0,r.bF)(U.Ay,null,{default:function(){return[(0,r.bF)(U.Ay.Sider,{width:220,theme:"light",class:"tg-designer-plugin-content-wrapper"},{default:function(){return[(0,r.bF)(l.value,s.value,null)]}}),(0,r.bF)(U.Ay.Content,{class:"tg-designer-canvas-wrapper"},{default:function(){return[(0,r.bF)(L,null,null)]}}),(0,r.bF)(U.Ay.Sider,{width:300,theme:"light",class:"tg-designer-property-wrapper"},{default:function(){return[(0,r.bF)(W,null,null)]}})]}})]}})]}})]}})}}},be={name:"Designer",setup:function(){return function(){return(0,r.bF)(ye,null,null)}}}},94282:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(20641),o=n(50953),i=n(65868),l=n(61010);function a(){const e=(0,i.U)(),t=(0,r.EW)(()=>e.schema),n=(0,r.EW)(()=>e.indicator),a=(0,r.EW)(()=>t.value.components),u=(0,o.KR)(null),{resetIndicator:c,updateIndicator:s}=function(){const e=(0,i.U)(),t=(0,r.EW)(()=>e.indicator),n=(0,r.EW)(()=>e.schema),o=(0,r.EW)(()=>n.value.components),a={THRESHOLD:{COMPONENT_AREA:30,CONTAINER:30},EDGE:{OFFSET:2}},u=(e,n,r,o)=>{if("layout"===t.value.containerType){const t=s(n);r=l.V.getValidChildren(n.children).valid,o=n.getBoundingClientRect(),c(e,n,r,o,t)}else d(e,n,o,r)},c=(e,n,r,o,i)=>{const u=l.V.getAdjustedPosition(e,n,o,i),c="layout"===t.value.containerType;l.V.checkDragEdgeThreshold(o,n.scrollTop,i,u,r,a,c)?d(e,n,o,r,i):p(n,c)};function s(e){return e.classList.contains("tg-designer-layout-container")&&window.getComputedStyle(e).flexDirection.startsWith("row")?"horizontal":"vertical"}const p=(n,r)=>{if((n.closest(".tg-designer-layout-component")?.dataset.nestedLevel||1)>(t.value?.nestedLevel||1))return;let o;const i=n.getBoundingClientRect();if(r){const e=n.closest(".tg-designer-canvas-container"),t=e.getBoundingClientRect();o={top:i.top-t.top+e.scrollTop-3,left:i.left-t.left+e.scrollLeft-3,width:i.width+6,height:i.height+6}}else{const e=window.getComputedStyle(n),t={top:parseFloat(e.paddingTop),right:parseFloat(e.paddingRight),bottom:parseFloat(e.paddingBottom),left:parseFloat(e.paddingLeft)};o={top:t.top+n.scrollTop-3,left:t.left+n.scrollLeft-3,width:i.width-t.left-t.right+6,height:i.height-t.top-t.bottom+6}}e.$patch({indicator:{...o,type:"container",lastValidIndex:-1,display:"block",layoutDirection:"vertical"}})},d=(t,n,r,o,i="vertical")=>{o=Array.from(o).filter(e=>e.classList.contains("tg-designer-drag-component"));const u=n.closest(".tg-designer-canvas-container"),c=u.getBoundingClientRect(),s=r.left-c.left-n.scrollLeft+u.scrollLeft,p=r.top-c.top-n.scrollTop+u.scrollTop,d=window.getComputedStyle(n),f=parseFloat(d.paddingTop),g=parseFloat(d.paddingRight),v=parseFloat(d.paddingBottom),y=parseFloat(d.paddingLeft),b=l.V.getAdjustedPosition(t,n,r,i),m=l.V.calculateCompMidPoints(r,o,i,n.scrollTop),h=l.V.determineInsertIndex(b,m);let A=0,w=0,F=0,E=0;const O=l.V.calculateComponentPosition(h,o,b,m,{...a,direction:i,gap:parseFloat(d.gap)});"horizontal"===i?(w=O+s,A=p+f,F="2px",E=r.height-f-v):(A=O+p,w=s+y,F=r.width-y-g,E="2px"),e.$patch({indicator:{type:"placeholder",display:"block",lastValidIndex:h,top:A,left:w,width:F,height:E}})};return{updateIndicator:(t,n)=>{if(!n.value)return;const{dropContainer:r,isInsideLayoutContainer:i}=l.V.findDropContainer(t,o.value)||{isInsideLayoutContainer:!1,dropContainer:n.value},a=i?"layout":"canvas",d="layout"===a?s(r):"vertical";e.$patch({indicator:{type:"none",containerType:a,layoutDirection:d,nestedLevel:parseInt(l.V.calculateNestedLevel(r))}});const f=l.V.getValidChildren(r.children),g=f.valid;if(!g.length||a&&r.dataset?.cellPosition)p(r,i);else{const e=r.getBoundingClientRect(),n=r.scrollTop;let o=t.clientY-e.top+n;l.V.isInsideAnyComponent(o,f.all,e,n)?u(t,r,g,e):c(t,r,g,e,d)}},resetIndicator:()=>{e.$patch({indicator:{type:"none",display:"none",lastValidIndex:-1,top:0,left:0,layoutDirection:"vertical",containerType:"canvas"}})}}}();return{handleDragStart:(t,n)=>{n.__animating?t.preventDefault():(e.selectedComponent=null,t.dataTransfer.effectAllowed=n.id?"move":"copy",t.dataTransfer.setData("application/json",JSON.stringify({id:n.id,type:n.id?"MOVE":"ADD",data:n})),t.currentTarget.classList.add("dragging"))},handleDragOver:(e,t)=>{e.preventDefault(),u.value||(u.value=requestAnimationFrame(()=>{s(e,t),u.value=null}))},handleDrop:(t,r)=>{t.preventDefault();const o=t.dataTransfer.getData("application/json");if(!o)return;const{type:i,data:s}=JSON.parse(o),{dropContainer:p,schema:d,parentId:f}=l.V.findDropContainer(t,a.value)||{parentSchema:a.value,dropContainer:r.value,parentId:null};let g=p.dataset?.cellPosition;const v=p.classList?.contains("tg-designer-layout-container")&&g;let y=0;if(!v)if("container"===e.indicator.type)y=d.length;else{const e=p.getBoundingClientRect(),r="horizontal"===n.value.layoutDirection?t.clientX-e.left:t.clientY-e.top+p.scrollTop,o=l.V.getValidChildren(p.children).valid,i=l.V.calculateCompMidPoints(e,o,n.value.layoutDirection,p.scrollTop);y=Math.max(0,Math.min(l.V.determineInsertIndex(r,i),d.length))}let b=null;function m(e,t){if(v){const n=d.findIndex(e=>e.cellPosition===g);n>-1?d.splice(n,1,t):d.splice(e,0,t)}else d.splice(e,0,t)}if("ADD"===i)b=e.createComponentSchema(s,f,g),m(y,b);else if("MOVE"===i){const e=(t,n)=>{for(let r=0;r<t.length;r++){if(t[r].id===n)return{parent:t,index:r};if(t[r].children){const o=e(t[r].children,n);if(o)return o}}return null},t=e(a.value,s.id);if(!t)return;const[n]=t.parent.splice(t.index,1);n.parentId=f,n.cellPosition=v?g:void 0,t.parent===d&&t.index<y&&(y=y--),y=Math.max(0,Math.min(y,d.length)),m(y,n),b=n}u.value&&(cancelAnimationFrame(u.value),u.value=null),c(),b&&e.updateComponent(b),setTimeout(()=>{d[y]={...d[y],__initialized:!0,__animating:!1}},200)},handleDragEnd:e=>{e.stopPropagation(),e.currentTarget.classList.remove("dragging"),u.value&&(cancelAnimationFrame(u.value),u.value=null),c(),setTimeout(()=>{document.querySelectorAll(".tg-designer-canvas-container .dragging").forEach(e=>{e.classList.remove("dragging")})},50)},handleDragLeave:e=>{e.currentTarget.contains(e.relatedTarget)||(u.value&&(cancelAnimationFrame(u.value),u.value=null),c())}}}},98753:function(e,t,n){n.d(t,{i:function(){return l},w:function(){return i}});var r=n(13574),o=n(50953);const i={version:"1.0",components:[],canvas:{class:"",style:{width:"100%",height:"",padding:0,margin:0,gap:8,alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}},l=e=>(0,o.IG)([{label:"尺寸",items:[r.O.width(),r.O.height()]},{label:"布局",items:[r.O.gap(),r.O.padding(),r.O.margin(),r.O.justifyContent({label:"垂直分布方式",title:"控制画布内各部件在垂直方向上如何分布：靠拢或分散（justify-content）"},{style:{flexDirection:"column"}}),r.O.alignItems({label:"水平对齐方式",title:"控制画布内各部件在水平方向上的对齐方式（align-items）"},{style:{flexDirection:"column"}})]},{label:"背景",items:r.O.background(null,e)}])}}]);