/*! For license information please see 905.85706d1d.js.LICENSE.txt */
"use strict";(self.webpackChunkvue_template_generator_v2=self.webpackChunkvue_template_generator_v2||[]).push([[905],{6011:function(t,e,n){n.d(e,{A:function(){return L}});n(52675),n(89463),n(2259),n(45700),n(2008),n(23792),n(89572),n(2892),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(3362),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953);var r=n(20641),o=(n(28706),n(27495),n(25440),n(50953)),a=n(61577),i=n(44983),u=n(71250),c=n(25887),l=n(49981),f=n(83115);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return v(l,"_invoke",function(n,r,o){var a,u,c,l=0,f=o||[],s=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,u=0,c=t,p.n=n,i}};function v(n,r){for(u=n,c=r,e=0;!s&&l&&!o&&e<f.length;e++){var o,a=f[e],v=p.p,d=a[2];n>3?(o=d===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=n<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,u=0))}if(o||n>1)return i;throw s=!0,r}return function(o,f,d){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&v(f,d),u=f,c=d;(e=u<2?t:c)||!s;){a||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(s=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,u=1,c=e}finally{l=1}}return{value:e,done:s}}}(n,o,a),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(v(e={},r,function(){return this}),e),s=l.prototype=u.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,v(t,o,"GeneratorFunction")),t.prototype=Object.create(s),t}return c.prototype=l,v(s,"constructor",l),v(l,"constructor",c),c.displayName="GeneratorFunction",v(l,o,"GeneratorFunction"),v(s),v(s,o,"Generator"),v(s,r,function(){return this}),v(s,"toString",function(){return"[object Generator]"}),(p=function(){return{w:a,m:d}})()}function v(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,r){function a(e,n){v(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},v(t,e,n,r)}function d(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){d(a,r,o,i,u,"next",t)}function u(t){d(a,r,o,i,u,"throw",t)}i(void 0)})}}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(62062),n(38781),n(5746),n(81454),n(37550);var g=n(39668),w=["text","loading","onClick"],O=["listener","condition","dependentField"];function P(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function j(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return S(l,"_invoke",function(n,r,o){var a,u,c,l=0,f=o||[],s=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,u=0,c=t,p.n=n,i}};function v(n,r){for(u=n,c=r,e=0;!s&&l&&!o&&e<f.length;e++){var o,a=f[e],v=p.p,d=a[2];n>3?(o=d===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=n<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,u=0))}if(o||n>1)return i;throw s=!0,r}return function(o,f,d){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&v(f,d),u=f,c=d;(e=u<2?t:c)||!s;){a||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(s=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,u=1,c=e}finally{l=1}}return{value:e,done:s}}}(n,o,a),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(S(e={},r,function(){return this}),e),s=l.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,S(t,o,"GeneratorFunction")),t.prototype=Object.create(s),t}return c.prototype=l,S(s,"constructor",l),S(l,"constructor",c),c.displayName="GeneratorFunction",S(l,o,"GeneratorFunction"),S(s),S(s,o,"Generator"),S(s,r,function(){return this}),S(s,"toString",function(){return"[object Generator]"}),(j=function(){return{w:a,m:p}})()}function S(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}S=function(t,e,n,r){function a(e,n){S(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},S(t,e,n,r)}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach(function(e){T(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function T(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function E(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function R(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){E(a,r,o,i,u,"next",t)}function u(t){E(a,r,o,i,u,"throw",t)}i(void 0)})}}function G(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}var _=["TGForm"],M=["TGModal"];function D(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return I(l,"_invoke",function(n,r,o){var a,u,c,l=0,f=o||[],s=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,u=0,c=t,p.n=n,i}};function v(n,r){for(u=n,c=r,e=0;!s&&l&&!o&&e<f.length;e++){var o,a=f[e],v=p.p,d=a[2];n>3?(o=d===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=n<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,u=0))}if(o||n>1)return i;throw s=!0,r}return function(o,f,d){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&v(f,d),u=f,c=d;(e=u<2?t:c)||!s;){a||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(s=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,u=1,c=e}finally{l=1}}return{value:e,done:s}}}(n,o,a),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(I(e={},r,function(){return this}),e),s=l.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,I(t,o,"GeneratorFunction")),t.prototype=Object.create(s),t}return c.prototype=l,I(s,"constructor",l),I(l,"constructor",c),c.displayName="GeneratorFunction",I(l,o,"GeneratorFunction"),I(s),I(s,o,"Generator"),I(s,r,function(){return this}),I(s,"toString",function(){return"[object Generator]"}),(D=function(){return{w:a,m:p}})()}function I(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}I=function(t,e,n,r){function a(e,n){I(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},I(t,e,n,r)}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach(function(e){B(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function B(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function W(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function L(t){var e=t.storeName,n=t.modalProps,s=t.modalStatusFieldName,v=void 0===s?"showModalForEditing":s,d=t.location,y=void 0===d?"modalForEditing":d,h=t.rules,S=t.isGetDetails,k=t.apiName,E=t.getParams,x=t.setDetails,I=t.searchParamOptions,K=t.formModelFormatter;(0,r.Gt)("inModal",!0);var B=(0,o.Kh)(n);(0,l.set)(B,"okButtonProps.disabled",!0);var L=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.storeName,a=e.isSearchForm,u=void 0!==a&&a,l=e.showSubmitButton,f=void 0!==l&&l,s=e.submitButtonProps,p=void 0===s?{}:s,v=e.location,d=e.modalStatusFieldName,m=e.searchParamOptions,y=e.isGetDetails,b=e.apiName,h=e.getParams,S=e.setDetails,k=e.formModelFormatter,E=e.buttonDisabledFn,x=e.rules,_=void 0===x?{}:x,M=e.loaded,D=(0,o.KR)([]),I=(0,o.KR)(null),K=(0,o.KR)(!0),A=(0,r.WQ)("hasTree",!1),B=(0,r.WQ)("refreshTree",void 0),C=(0,r.WQ)("optionsOfGetList",null),W=(0,r.WQ)("inModal",!1),L=(0,c.A)(n);t="./common"===n?L:(0,c.A)("./common"),v&&!L[v].form&&(L[v].form={});var Q=(0,r.EW)(function(){return v?L[v].loading:L.loading}),q=(0,r.EW)(function(){return L.search}),V=(0,r.EW)(function(){var t;return null===(t=L[v])||void 0===t?void 0:t.form}),$=(0,r.EW)(function(){return L.currentItem}),Y=(0,r.EW)(function(){return L[d]||!1}),U=(0,o.Kh)(v?V.value:q.value),z=(0,o.Kh)(_),H=(0,o.KR)((null==m?void 0:m.length)<=0),J=null==m?void 0:m.some(function(t){return!0===t.isRequired}),X=p.text,Z=p.loading,tt=p.onClick,et=G(p,w),nt=(0,o.KR)(!1);"function"==typeof E&&(0,r.wB)(U,function(){return nt.value=E()});var rt=g.Ay.useForm(U,z),ot=rt.resetFields,at=rt.clearValidate,it=rt.validate,ut=rt.validateInfos,ct=(0,o.KR)(0),lt=(0,r.EW)(function(){var t,e,n,r;return!(null!==(t=null===(e=L[v])||void 0===e?void 0:e.rowKey)&&void 0!==t?t:L.rowKey)||!$.value||!((null!==(n=null===(r=L[v])||void 0===r?void 0:r.rowKey)&&void 0!==n?n:L.rowKey)in $.value)});function ft(){var t=Object.keys(U).length;!lt.value&&t<=1||lt.value}function st(){return(st=R(j().m(function t(e){return j().w(function(t){for(;;)switch(t.n){case 0:return ot(),t.n=1,pt(e);case 1:return t.a(2)}},t)}))).apply(this,arguments)}function pt(){return vt.apply(this,arguments)}function vt(){return vt=R(j().m(function t(){var e,n,r,a,i,u,c,l,f,s,p,m,y=arguments;return j().w(function(t){for(;;)if(0===t.n)return n=(e=y.length>0&&void 0!==y[0]?y[0]:{}).callback,r=e.apiName,a=e.action,i=e.params,u=e.isMergeParam,c=e.isRefreshTable,l=void 0===c||c,f=e.optionsOfGetList,s=e.isRefreshTree,p=e.setDataFromResponseData,m=e.success,t.a(2,new Promise(function(t){it().then(R(j().m(function e(){var c,y,b,h;return j().w(function(e){for(;;)switch(e.p=e.n){case 0:if("function"!=typeof n){e.n=2;break}return b=t,e.n=1,n();case 1:b(e.v),e.n=8;break;case 2:return i="function"==typeof i?i():i,c=(0,o.ux)($.value),e.p=3,e.n=4,L.fetch({action:a,apiName:r,location:v,params:i,isMergeParam:u,isRefreshTable:l,modalStatusFieldName:d,setDataFromResponseData:p,optionsOfGetList:F(F({},C),f)});case 4:if(y=e.v,t(y),!y.status){e.n=6;break}if(!s||!A){e.n=5;break}return e.n=5,null==B?void 0:B();case 5:null==m||m(y,c);case 6:e.n=8;break;case 7:throw e.p=7,h=e.v,new Error(h);case 8:return e.a(2)}},e,null,[[3,7]])}))).catch(function(e){t({status:!1})})}))},t)})),vt.apply(this,arguments)}function dt(t){return mt.apply(this,arguments)}function mt(){return mt=R(j().m(function t(e){var n,o,a,i,u,c;return j().w(function(t){for(;;)switch(t.n){case 0:if(n=e.listener,o=e.condition,a=e.dependentField,i=G(e,O),"boolean"==typeof(u="function"==typeof o?o(L.$state):o)&&!u){t.n=3;break}if(!a){t.n=1;break}c="function"==typeof a?a(L.$state):a,D.value.push((0,r.wB)(function(){return i.location?V.value[c]:q.value[c]},function(){var t=R(j().m(function t(n,r){var o;return j().w(function(t){for(;;)switch(t.n){case 0:if(n===r){t.n=5;break}if(bt(e),!n){t.n=5;break}if("function"!=typeof i.customData){t.n=3;break}return t.n=1,i.customData(n);case 1:if(o=t.v,Array.isArray(o)){t.n=2;break}throw new Error("自定义枚举 ".concat(i.stateName," 的 customData 函数返回值必须为一个数组。"));case 2:L.setState(i.stateName,o,{location:i.location}),t.n=5;break;case 3:if(i.apiName){t.n=4;break}throw new Error("非自定义枚举 ".concat(i.stateName," 必须指定 apiName。"));case 4:return t.n=5,L.getList(i);case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),{immediate:!0})),t.n=2;break;case 1:return t.n=2,L.getList(i);case 2:if(!n){t.n=3;break}return t.a(2,function(){(0,r.wB)(function(){return V.value[e.paramNameInSearchRO]},function(t,n){(e.isRequired&&t&&t!==n||!e.isRequired&&t!==n)&&L.saveParamsAndExecSearch()})});case 3:return t.a(2)}},t)})),mt.apply(this,arguments)}function yt(t){var e;null==m||null===(e=m.filter(function(e){return e.dependentField===t}))||void 0===e||e.forEach(function(t){bt(t)})}function bt(t){if(K.value)if(t.location){var e=L[t.location].form[t.paramNameInSearchRO];null==e||"object"===N(e)?(null==e&&yt(t.paramNameInSearchRO),L[t.location].form[t.paramNameInSearchRO]=null):""===e?yt(t.paramNameInSearchRO):L[t.location].form[t.paramNameInSearchRO]=u?"":null}else""===L.search[t.paramNameInSearchRO]?yt(t.paramNameInSearchRO):L.search[t.paramNameInSearchRO]=u?"":null;L.setList(t.stateName,[],t.location)}v&&(d?(0,r.wB)(Y,function(t){t?ft():(ct.value=0,H.value=!1,ot(),at())}):ft(),u||(0,r.wB)($,function(){var t=R(j().m(function t(e){var n,a,i,u,c;return j().w(function(t){for(;;)switch(t.n){case 0:if(W&&!Y.value){t.n=6;break}if(v!==e._location||!(!lt.value&&(y&&ct.value<2||!y&&ct.value<1)||lt.value&&ct.value<1)){t.n=6;break}if(K.value=!1,n={},!(Object.keys(e).length-3>0)){t.n=4;break}u=P(U);case 1:if((c=u()).done){t.n=4;break}if(!((a=c.value)in e)){t.n=3;break}if(i=U[a],(0,o.ux)(e[a])||"object"!==N(i)){t.n=2;break}return t.a(3,1);case 2:n[a]=e[a];case 3:t.n=1;break;case 4:return L.$patch(T({},v,{form:F(F({},n),null==k?void 0:k(e))})),t.n=5,(0,r.dY)();case 5:K.value=!0,at(),ct.value++;case 6:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),{deep:!0})),(0,r.hi)(function(){L.$reset()});var ht={name:"TGForm",setup:function(t,e){return R(j().m(function t(){var n,o,a,u,c,l,s,w,O,P,k,T;return j().w(function(t){for(;;)switch(t.n){case 0:if(T=function(){return(T=R(j().m(function t(){return j().w(function(t){for(;;)switch(t.n){case 0:if("function"!=typeof tt){t.n=1;break}tt(),t.n=2;break;case 1:return t.n=2,pt(F({isRefreshTable:a},p.submitOptions));case 2:return t.a(2)}},t)}))).apply(this,arguments)},k=function(){return T.apply(this,arguments)},P=function(){return(P=R(j().m(function t(){var e,n,r;return j().w(function(t){for(;;)switch(t.n){case 0:if(e={},!y){t.n=3;break}if(!((r="function"==typeof h?h($.value):h)||null!==(n=$.value)&&void 0!==n&&n[L.rowKey])){t.n=2;break}return t.n=1,L.getDetails({location:v,params:r,apiName:b,setValue:S});case 1:e=t.v,t.n=3;break;case 2:lt.value;case 3:return t.a(2,Promise.resolve(e))}},t)}))).apply(this,arguments)},O=function(){return P.apply(this,arguments)},w=function(){return(w=R(j().m(function t(){return j().w(function(t){for(;;)switch(t.n){case 0:if(!Array.isArray(m)||!m.length){t.n=1;break}return t.n=1,Promise.all(m.map(function(t){return dt(t)}));case 1:return H.value=!0,t.a(2,Promise.resolve())}},t)}))).apply(this,arguments)},s=function(){return w.apply(this,arguments)},l=function(){return(l=R(j().m(function t(){return j().w(function(t){for(;;)switch(t.n){case 0:if(!J){t.n=3;break}return t.n=1,s();case 1:return t.n=2,O();case 2:t.n=6;break;case 3:if(H.value){t.n=5;break}return t.n=4,Promise.all([s(),O()]);case 4:t.n=6;break;case 5:return t.n=6,O();case 6:"function"==typeof M&&M(V);case 7:return t.a(2)}},t)}))).apply(this,arguments)},c=function(){return l.apply(this,arguments)},n=e.slots,e.emit,o=(0,r.WQ)("inModal",!1),a=(0,r.WQ)("isInitData",!1),!o){t.n=1;break}u=(0,r.EW)(function(){return L[d]}),(0,r.wB)(u,function(){var t=R(j().m(function t(e){return j().w(function(t){for(;;)switch(t.n){case 0:if(!e){t.n=2;break}return t.n=1,c();case 1:t.n=3;break;case 2:D.value.forEach(function(t){t()}),D.value=[];case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),{immediate:!0}),t.n=2;break;case 1:return"currentItem"in L.$state&&L.setState("currentItem",F({_prevCurrentItem:void 0,_location:v,_type:"isNotModal"},$.value)),t.n=2,c();case 2:return t.a(2,function(){var t;return(0,r.bF)(g.Ay,{class:"tg-form",colon:!1,model:U,ref:I},{default:function(){return[null===(t=n.default)||void 0===t?void 0:t.call(n),f&&(0,r.bF)(i.A,(0,r.v6)(et,{loading:Z||Q.value,disabled:Z||Q.value,onClick:k}),(e=X,"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.vv)(e)?X:{default:function(){return[X]}}))];var e}})})}},t)}))()}};return{search:q,validateInfos:ut,resetFields:ot,clearValidate:at,handleFinish:pt,formModel:U,currentItem:$,store:L,commonStore:t,buttonDisabled:nt,confirmLoading:Q,handleClear:function(t){return st.apply(this,arguments)},initSearchParamResult:H,TGForm:ht,formRef:I}}({storeName:e,location:y,modalStatusFieldName:v,rules:h,searchParamOptions:I,isGetDetails:S,apiName:k,getParams:E,setDetails:x,formModelFormatter:K,loaded:function(t){var e=(0,r.wB)(t,function(){(0,l.set)(B,"okButtonProps.disabled",!1),e()},{deep:!0})}}),Q=L.TGForm,q=W(L,_),V=function(t){var e=t.location,n=void 0===e?"modalForEditing":e,s=t.modalStatusFieldName,v=void 0===s?"showModalForEditing":s,d=t.modalProps,y=t.store;y||(y=(0,c.A)());var h=(0,r.EW)(function(){var t,e,r=null==d?void 0:d.onCancel,o=null==d?void 0:d.onOk;return b(b({},d),{},{onCancel:(e=m(p().m(function t(){return p().w(function(t){for(;;)switch(t.n){case 0:y.setVisibilityOfModal({modalStatusFieldName:v,location:n,value:!1}),"function"==typeof r&&r();case 1:return t.a(2)}},t)})),function(){return e.apply(this,arguments)}),onOk:(t=m(p().m(function t(){return p().w(function(t){for(;;)switch(t.n){case 0:if("function"!=typeof o){t.n=2;break}return B(!0),t.n=1,o();case 1:B(!1),t.n=3;break;case 2:throw new Error("tgModal：未找到 okButton 点击事件绑定的函数，请确认！");case 3:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})}),g=(0,r.EW)(function(){return h.value.okButtonProps||{}}),w=(0,r.EW)(function(){return y[v]}),O=(0,r.EW)(function(){return y.currentItem}),P=(0,r.EW)({get:function(){return y[n]&&"loading"in y[n]||(0,l.set)(y,"".concat(n,".loading"),!1),y[n].loading},set:function(t){return y[n].loading=t}}),j=(0,o.KR)(null),S=(0,o.KR)(!1),k=(0,o.KR)(!1),F=(0,o.KR)(0),T=(0,o.KR)(0),N=(0,o.KR)(!1),E=(0,o.KR)(0),R=(0,o.KR)(0),G=(0,o.KR)(0),x=(0,o.KR)(0),_=(0,o.KR)({left:0,right:0,top:0,bottom:0}),M=(0,f.PMY)(j),D=M.x,I=M.y,K=M.isDragging;(0,r.wB)([D,I],function(){if(!N.value){F.value=D.value,T.value=I.value;var t=document.body.getBoundingClientRect(),e=j.value.getBoundingClientRect();_.value.right=t.width-e.width,_.value.bottom=t.height-e.height,G.value=E.value,x.value=R.value}N.value=!0}),(0,r.wB)(K,function(){K||(N.value=!1)}),(0,r.nT)(function(){N.value&&(E.value=G.value+Math.min(Math.max(_.value.left,D.value),_.value.right)-F.value,R.value=x.value+Math.min(Math.max(_.value.top,I.value),_.value.bottom)-T.value)});var A=(0,r.EW)(function(){return{transform:"translate(".concat(E.value,"px, ").concat(R.value,"px)")}});function B(t){S.value=t,k.value=t,y.setLoading({stateName:"loading",value:t,location:n})}return(0,r.wB)(w,function(t){t||y.setLoading({value:!1,stateName:"loading",location:n})}),{TGModal:{name:"TGModal",props:{readonly:{type:Boolean,default:!1}},setup:function(t,e){var n=e.slots;return(0,r.Gt)("inModal",!0),function(){var e,o;return(0,r.bF)(a.A,(0,r.v6)({class:"tg-modal",getContainer:function(){return document.querySelector("#tg-global-modals")},open:y[v],maskClosable:!1,wrapStyle:{overflow:"hidden"}},t.readonly?{footer:(0,r.bF)(i.A,{onClick:h.value.onCancel},{default:function(){return[h.value.cancelText||"取消"]}})}:{},h.value,{okButtonProps:b(b({},g.value),{},{disabled:P.value||g.value.disabled||k.value,loading:g.value.loading||S.value}),title:(0,r.bF)("div",{ref:j,style:{cursor:"move",userSelect:"none"}},[null===(e=h.value)||void 0===e||null===(e=e.title)||void 0===e?void 0:e.replace("{ACTION}",null!==(o=O.value)&&void 0!==o&&o.id?"编辑":"新增")])}),{default:function(){var t;return(0,r.bF)(u.A,{spinning:P.value},{default:function(){return[null===(t=n.default)||void 0===t?void 0:t.call(n)]}})},modalRender:function(t){var e=t.originVNode;return(0,r.bF)("div",{style:A.value},[(0,r.bF)(e,null,null)])}})}}},open:w,currentItem:O,handleCancel:h.value.onCancel}}({location:y,modalStatusFieldName:v,modalProps:B,store:q.store}),$=V.TGModal,Y=W(V,M);function U(){var t;return t=D().m(function t(){var e,n,r,o,a,i,u,c,l,f,s,p,d,m=arguments;return D().w(function(t){for(;;)switch(t.n){case 0:return n=(e=m.length>0&&void 0!==m[0]?m[0]:{}).callback,r=e.apiName,o=e.action,a=e.params,i=e.isMergeParam,u=void 0===i||i,c=e.isRefreshTable,l=void 0===c||c,f=e.optionsOfGetList,s=e.isRefreshTree,p=e.success,d="function"==typeof a?a()||{}:a||{},r||!(q.store.rowKey in(Y.currentItem.value||{}))||d[q.store.rowKey]||(d.id=Y.currentItem.value[q.store.rowKey]),t.n=1,q.handleFinish({params:d,callback:n,apiName:r,action:o,isMergeParam:u,isRefreshTable:l,optionsOfGetList:f,isRefreshTree:s,modalStatusFieldName:v,success:p});case 1:return t.a(2,t.v)}},t)}),U=function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){C(a,r,o,i,u,"next",t)}function u(t){C(a,r,o,i,u,"throw",t)}i(void 0)})},U.apply(this,arguments)}return(0,r.wB)(Y.open,function(t){(0,l.set)(B,"okButtonProps.disabled",!0)}),A(A(A({TGFormModal:function(t,e){var n,o=e.slots;return(0,r.bF)($,{class:"tg-form-modal",style:{"--label-width":t.labelWidth||"80px"},readonly:t.readonly},{default:function(){return[(0,r.bF)(Q,null,{default:function(){return[null===(n=o.default)||void 0===n?void 0:n.call(o)]}})]}})}},Y),q),{},{handleFinish:function(){return U.apply(this,arguments)}})}},72905:function(t,e,n){var r=n(20641),o=(n(52675),n(89463),n(40875),n(10287),n(26099),n(3362),n(66543)),a=n(39668),i=n(6011),u=n(18787),c=n(25887),l=n(49981);function f(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return s(l,"_invoke",function(n,r,o){var a,u,c,l=0,f=o||[],s=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,u=0,c=t,p.n=n,i}};function v(n,r){for(u=n,c=r,e=0;!s&&l&&!o&&e<f.length;e++){var o,a=f[e],v=p.p,d=a[2];n>3?(o=d===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=n<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,u=0))}if(o||n>1)return i;throw s=!0,r}return function(o,f,d){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&v(f,d),u=f,c=d;(e=u<2?t:c)||!s;){a||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(s=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,u=1,c=e}finally{l=1}}return{value:e,done:s}}}(n,o,a),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),v=l.prototype=u.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,s(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t}return c.prototype=l,s(v,"constructor",l),s(l,"constructor",c),c.displayName="GeneratorFunction",s(l,o,"GeneratorFunction"),s(v),s(v,o,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),(f=function(){return{w:a,m:d}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function a(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},s(t,e,n,r)}function p(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){p(a,r,o,i,u,"next",t)}function u(t){p(a,r,o,i,u,"throw",t)}i(void 0)})}}e.A={name:"ModalForChangePassword",props:{type:{type:String,default:"local"},okText:{type:String,default:"确定"},cancelText:{type:String,default:"关闭"}},setup:function(t,e){e.attrs;var n,s=(0,c.A)("/login"),p=(0,c.A)("./common"),d=(0,r.EW)(function(){return s.details.userInfo}),m="modalForChangePassword",y={okText:t.okText,cancelText:t.cancelText,width:400,title:"global"===t.type?"重置账户密码":"重置密码",onOk:(n=v(f().m(function e(){return f().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g({apiName:"updatePasswordOfAccounts",isRefreshTable:!1,params:function(){return"global"!==t.type?{ids:P.value.id}:{ids:d.value.id}},success:function(){var e=v(f().m(function e(n,r){return f().w(function(e){for(;;)switch(e.n){case 0:if("local"===t.type&&d.value.id!==r.id){e.n=2;break}return e.n=1,s.logout();case 1:u.Ay.success("密码修改成功，请重新登录！"),e.n=3;break;case 2:u.Ay.success("密码修改成功");case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(){return n.apply(this,arguments)})};(0,l.set)(p,"".concat(m,".form.pwd"),void 0);var b=(0,i.A)({storeName:"global"===t.type?"./common":void 0,modalProps:y,modalStatusFieldName:"showModalForChangePassword",rules:{pwd:[{required:!0,message:"请输入新的职员登录密码！"}]},location:m}),h=b.TGFormModal,g=b.handleFinish,w=b.formModel,O=b.validateInfos,P=b.currentItem;return function(){return(0,r.bF)(h,null,{default:function(){return[(0,r.bF)(a.Ay.Item,(0,r.v6)({label:"新密码"},O.pwd),{default:function(){return[(0,r.bF)(o.A,{value:w.pwd,"onUpdate:value":function(t){return w.pwd=t},maxLength:32,placeholder:"请输入新的职员登录密码",allowClear:!0},null)]}})]}})}}}}}]);