.tg-editor-container {
  height: 100%;

  .tg-editor-header {
    position: relative;
    height: 48px;
    flex: none;
    padding: 8px 16px;
    background: var(--tg-theme-color-bg-container);
    border-bottom: 1px solid var(--tg-theme-color-border);

    .tg-editor-tools {
      .save-status-bar {
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 2px;
        background: rgba(24, 144, 255, 0.1);

        .save-progress {
          width: 0;
          height: 100%;
          background: #1890ff;
          transition: width 1s ease;
          animation: savingProgress 1.5s infinite;
        }
      }

      @keyframes savingProgress {
        0% {
          width: 0;
          opacity: 1;
        }
        50% {
          width: 80%;
          opacity: 0.8;
        }
        100% {
          width: 100%;
          opacity: 0;
        }
      }
    }
  }

  .tg-editor-material-wrapper {
    .tg-editor-material-container {
      height: 100%;
      padding: 12px;
      user-select: none;
      overflow-y: auto;

      .tg-editor-material-category {
        margin-bottom: 20px;

        .tg-editor-material-title {
          font-weight: bolder;
          border-bottom: 1px solid #e3e3e3;
        }

        .tg-editor-material-items {
          margin-bottom: 20px;
          border: 1px dashed #d9d9d9;
          padding: 8px;
          transition: all 0.3s;

          [draggable='true'] {
            cursor: grab;

            &:active {
              cursor: grabbing;
            }
          }

          & > * {
            cursor: move;
            width: 100%;
          }

          &:hover {
            border-color: #1890ff;
            background-color: #e6f7ff;
          }
        }
      }
    }
  }

  .tg-editor-canvas-wrapper {
    padding: 12px;
    background: #f5f5f5;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;

    .tg-editor-canvas-container {
      position: relative;
      background: #ffffff;
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 15px;
      user-select: none;
      overflow-y: auto;
      overflow-x: hidden;
      z-index: 1;
      height: 100%;

      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        height: 15px;
        left: 0;
        right: 0;
        z-index: 1000;
        pointer-events: none;
      }

      //&.tg-editor-insert-target {
      //  $outline-color: var(--tg-theme-color-primary, #1890ff);
      //
      //  outline: 2px dashed $outline-color;
      //  outline-offset: 4px; // 控制边框与元素间距
      //  transition: outline 0.1s ease;
      //  position: relative;
      //  z-index: 99999 !important;
      //  will-change: outline;
      //
      //  // 添加呼吸动画效果
      //  animation: pulseOutline 1.5s ease-in-out infinite;
      //
      //  // 为未来嵌套容器预留样式
      //  [data-nested-level="1"] .tg-editor-insert-target {
      //    outline-offset: 8px;
      //  }
      //  [data-nested-level="2"] .tg-editor-insert-target {
      //    outline-offset: 12px;
      //  }
      //
      //  @keyframes pulseOutline {
      //    0%, 100% {
      //      outline-width: 2px;
      //    }
      //    50% {
      //      outline-width: 3px;
      //    }
      //  }
      //}

      .tg-editor-drag-placeholder {
        $indicator-color: var(--tg-theme-color-primary, #1890ff); // 使用主题色
        $dash-width: 10px; // 虚线单段长度
        $gap-width: 5px; // 虚线间隔

        display: none;
        position: absolute;
        left: 15px !important;
        right: 15px !important;
        height: 2px; // 保持原有高度
        background: repeating-linear-gradient(
            90deg,
            $indicator-color 0 $dash-width,
            transparent $dash-width ($dash-width + $gap-width)
        );
        border-radius: 2px;
        z-index: 100001;
        pointer-events: none;
        animation: flowLine 5s linear infinite;
        background-size: ($dash-width + $gap-width) 100%; // 背景尺寸需要等于单周期长度
        background-position-x: 0;

        &[data-active='true'] {
          display: block;
        }

        &::before {
          content: '';
          position: absolute;
          inset: 0;
          background: linear-gradient(
              90deg,
              rgba($indicator-color, 0) 0%,
              rgba($indicator-color, 0.5) 50%,
              rgba($indicator-color, 0) 100%
          );
          animation: glowFlow 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
          filter: blur(2px);
          will-change: filter, opacity;
          mix-blend-mode: screen; // 混合模式增强光晕
        }

        // 定义流动动画
        @keyframes flowLine {
          0% {
            background-position-x: 0;
          }
          100% {
            background-position-x: -($dash-width + $gap-width); // 负数实现无缝滚动
          }
        }

        // 光晕动画
        @keyframes glowFlow {
          0% {
            opacity: 0;
            transform: translateX(-150%) skewX(-20deg); // 增加倾斜角度
          }
          50% {
            opacity: 0.6;
            filter: blur(4px); // 动态模糊变化
          }
          100% {
            opacity: 0;
            transform: translateX(150%) skewX(20deg);
          }
        }
      }

      .tg-editor-canvas-component {
        position: relative;
        transition: all 0.2s;
        transform: translateZ(0); // 强制开启GPU加速
        backface-visibility: hidden;
        outline: 1px dashed transparent;
        user-select: none; // 防止文字选中干扰
        touch-action: none; // 优化移动端体验
        cursor: move; // 显示可拖动光标
        z-index: 998;

        & > * {
          cursor: move;
        }

        &:hover {
          outline-color: #1890ff;
        }

        &::before {
          content: '';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          background: #1890ff;
          opacity: 0;
          transition: opacity 0.1s linear;
          will-change: opacity; // 启用硬件加速
          z-index: 999;
        }

        &::after {
          content: '';
          position: absolute;
          left: 0;
          right: 0;
          bottom: 0;
          height: 4px;
          pointer-events: none;
          border: 2px dashed #1890ff;
          opacity: 0;
          transition: opacity 0.2s;
          z-index: 999;
        }

        &.dragging {
          opacity: 0.4;
          transform: scale(0.98);
          transition: all 0.2s ease-out;
          z-index: 9999;

          &::after {
            content: '';
            position: absolute;
            inset: 0;
            border: 2px dashed #1890ff;
          }
        }
      }
    }
  }

  .tg-editor-property-wrapper {
    padding: 10px;

    .tg-editor-property-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      height: 100%;
      overflow-y: auto;

      .tg-editor-form-item {
        display: flex;
        flex-direction: column;
        align-items: flex-start;

        & > * {
          width: 100%;
        }
      }
    }
  }
}
